<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Go Template 만들기  - msa-ez.github</title><meta name="gridsome:hash" content="2e21f71c41a4721d50be309967c5b94360bb4617"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.22"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="og:url" name="og:url" content="undefined/templates-language/springboot-java-template/"><meta data-vue-tag="ssr" name="description" content="undefined"><meta data-vue-tag="ssr" data-key="og:title" name="og:title" content="Go Template 만들기 "><meta data-vue-tag="ssr" data-key="twitter:title" name="twitter:title" content="Go Template 만들기 "><meta data-vue-tag="ssr" data-key="og:description" name="og:description" content="undefined"><meta data-vue-tag="ssr" data-key="twitter:description" name="twitter:description" content="undefined"><meta data-vue-tag="ssr" data-key="og:type" name="og:type" content="website"><meta data-vue-tag="ssr" data-key="twitter:card" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" data-key="og:image" name="og:image" content="undefined/logo.jpg"><meta data-vue-tag="ssr" data-key="twitter:image" name="twitter:image" content="undefined/logo.jpg"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.f0886199c685a75a52fccefb5e72c094.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.f0886199c685a75a52fccefb5e72c094.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.f0886199c685a75a52fccefb5e72c094.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.f0886199c685a75a52fccefb5e72c094.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.f0886199c685a75a52fccefb5e72c094.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.f0886199c685a75a52fccefb5e72c094.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.f0886199c685a75a52fccefb5e72c094.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.f0886199c685a75a52fccefb5e72c094.png"><link rel="preload" href="/assets/css/0.styles.8fa3adb2.css" as="style"><link rel="preload" href="/assets/js/app.e3e72f7a.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--markdown-page-vue.e6b76cf2.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.c25ecd7a.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.4fb285f5.js"><link rel="prefetch" href="/assets/js/search.ce3ea259.js"><link rel="stylesheet" href="/assets/css/0.styles.8fa3adb2.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="font-sans antialiased text-ui-typo bg-ui-background"><div class="flex flex-col justify-start min-h-screen"><header class="sticky top-0 z-10 w-full border-b bg-ui-background border-ui-border"><div class="py-2 border-t-2 border-ui-primary"><div class="container"><div class="flex items-center justify-between -mx-2 sm:-mx-4"><div class="flex flex-col items-center px-2 mr-auto sm:px-4 sm:flex-row"><a href="/" title="Home" class="flex items-center text-ui-primary active"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 120 64' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-37afcb0017f229c304bfe602273e7d7c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-37afcb0017f229c304bfe602273e7d7c)' width='120' height='64' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAYAAADvVd%2bPAAAACXBIWXMAAC4jAAAuIwF4pT92AAATu0lEQVRo3sVZB3RU15lWIxhscMtunHhd8EkcJzFusb1xwMaAuoQkpFEFUWQwzXEMAQSYElFEkVCbGUmjikZdIJBAqIxmRgUJVRAqmGLABQdwTBDqZebdb/97Z0YIO1nvnrN7mHO%2b89/35pX5vvu3e8fKij69eQ4C48ffg7UZNgK5DrY9ufZ2wtJ5qwfw0cirrDSKahuCrRk0rrKuUFRb05h/Z1VhukZcP378g09vnr2VmZwtR4/Z8nNE9Ed/DAlhRfdM%2bS7X/QXkv/rWtrQ6R2cVW%2bSVNBDkoRoK9EwaCvBMGvQn60fwJcgIPnRuvkfSkBeNPWns4aEadCfrRseudN5lvmrAZU6SZJ%2bobA/Ry3XLyhXV7xPBXxGRh/%2b731PxQ3FsK%2bTi2Fojrx4TQtievP8BQSJHBJ8h%2bzrBje5ZQTaMhEulcTmN2%2bn7G925zgNS/n9K0enF3S5qwC8T8LFAfT9kZojjDMDbgkP34ENwIySnXkNraiN0CfUgAQbph39DaCQyeWT3EuHlhDk0/hXZx36MDxdovOUEnyC8SiQcyS4mbOnNtY8nW0K2lfAFobc/3wGGo05AsTNwwpXgBlbsIs4NHXZEb74zjPnvQJ2ROmKvgmF%2bUr%2bBZpQwZKDZFdaLjt0T%2bgyO8l6jo7zP6KzoNXok9hvpvJG8xUjXE8iqBgXck4alQ8ozxiq5zkAeIFUqa6BPqENNUiPqU1twOu0M6lKaUa06DRJghEhdJ9tMOMzFISwjOBB%2bTZh6T4Tq%2b1w4khU5Y6DAETjuQsRcTJbIGY%2b5YOiIM/oLnECCMAoJqTfP0XA3Z67hTsYfCTMMPbkORvpO6s51Yoa8P7JydTgcVWBeSf2MCDEiT3aI7ACzVwyyoBywtSVg60%2bCfXQcbH46mKNigK7n1wyJe4g8m0fH3nTPYUUj08n1jGafaUyQiKiRrIGsoeSgxngiUiOVx%2bpRlViPWhKHi3I6tZVEahXnuDiEvxHOE%2baYQ8DGIsBfOGma5REiQoTsDdxyknfVfzT2Z8%2bQutUzGHkI4yLczX6fjRx1ZWjczFC3FgN5c0iYuexunhNG8mayM1l/Zm4qIycCQSZpCB6JA5iXNIq4GiNi0ouxdsNWfLx2Azbt2IeUomZsLQOclIMgTwCJABIANPsIVPWgRFGLSnkVd39OBERaCFEep4dGXsM6T1xkFzRXWP2hFlYarZPoOyMXhgtEiZFbqVJRA62yFo3pbXR/tbNZAFshAM2gB3djImck8pwkiDyjmWcjDXvw93oFjLXr0Zv9Pj%2bPkWIvdGiS4ecfiDVr/oRvT8WiP3c2unMd2WDeLFzNCWZ%2bSXfZPNUwF0CQcoofRkLNABb6eYJeeR9%2bYm2FvZFyfFQEOCv76XqTAK5JI1iWeJtIVnHS4wWgcRU0cdVo03ZgzUdr4ObuhqK8YjTlnEVptNbiKXQvt0IwSdwrckjVS9/zAPtX%2b4h0r2WGcx2I0CzcOhUHV68ATHniKWzf8VdIdZvxj5RXITXtwRyne0T2hG0FqpbhH%2br30Jdnj9u57vgg%2bSu4qIxEZgDOij6sJnI790aZ77HGc88/D4c5s/DitKfFueAAH%2bypAubG9QnBvEgAZ/KYtYk3QBVAkK8wk9coq3EiogIXyj/Hnz7%2b09jvePq5X%2bBM5TlUxJgEEteaReMC8NxB9ibhSbMA1pYk%2bBTh9iDlAB7Ld7LeB8p9kZW4995M2U5GV2UyjHnv4FZNFJ5%2b/sWx75xc3IGG7ejOeAc9FAaDebOxPvUcnFQM3skDsCdSYVrAV%2bYtrqe3Iv%2b4Hse%2bBGLKbmK3IhcJFX%2bDd6oB81Q8bIaEAE4kwLaEL1Aj16LcLAAnw12/WtUA/YkqTJg4QQg6wW6CePaRjKOoS21GWaxuPHnuAcYauodE6Rgrg5ZEaK77nZYwuJNJAlQEID0uTDx00kMThd26eQNQvxJtxfsxYfLj45R/EX%2bvjUZ/9kx05zljNG8mDqSVw0FF5SypHw7yPoRSjK9eY5otG1tbTJ/%2bCjaHxyO%2b/BtENwMOCRLcE/oFeUqaYx5wIP7iPQHGzf4l3VX4%2bvmanmdjAzs7O7M3huNsQSdORlWOCVAhNwlwKrmJH580l0BrSx9gY06EpbwSmAVgqAhEauxO8VA7O1thX3jpFaArGcXJ2%2bnYZlwc/wS1R6IgFbngdraj8JJDhw5hLglApVAkQK9UBrXmMn75H0/cF///9thD%2bGjVCiTV9sFNNUKxPyBEsOQAaoJQZRaAk%2bEzW5/WguL847CyNj3DP8Afb775phgHBgbifNlllERqxvKFWQgDrwpklUIARZWtEIB3fOYwUPLSx7P/ncxZgCYIqqi/iodOmGAnwMe1ZflIVR4Q45df/h0ef/wxMY4O/xTQLsJ3mbNFL1Cq3sdLIcWzKam5xvcjOJshobgD/rL5eOZnj90nxKrlS7GbwsRe3i9yABeAyiCylS0iB5TLq8Xsl0RocKn6Khwc7cV9EydOxMWOi/Dy9BLHr73xKs5VdKIsalwIiKpRZeA9Ax1vMMe/ncUDzALYrxWl0CQAQ%2bVCKCO2i4c%2b9dTP4OnhIcZLQ5ZhY2ioGIeGbsK7774rxgEBgZQHNuN2xkyM5L%2bHlqy1cFeNjlUB14RBEgDYcwpQtALyir9jx/54/PQJUyg9%2begkJJR9SbNOiVM1IMjLVP04qjgNrVwv4v9kdCWas9qQmZo1JpyrmytGuw1YtWKVOJ7y6BToi2qgU9bR7OvHl00j7w/oOf7fL4G25hDwko5ZQoALEIy4/dtMbvrTJ3HsWLGItUcfnYpp06aJ88XHCvHh8uVi/NL036O7LhI9WTOpL5iNKzmLIEvqhQfVcj77Kw8DyowiBPnLsDu%2bENHlt1F%2b5hZeefm34v5HH54A5YmLmJfCSIB%2bCodhLErsRin1ABpz7Jce1OJCzWW88ebrYwLYUfKbNu15PPPsM2PnUpSpaFJTOYzRmgQwlUGmja/lx3%2bwlECzBzjYmEPgDXMZxJ3M9xh35%2bjwreKBDz00Cd9c6YCri5M56ViLHHCp/ggU%2b03XTJryBGs7GQdDoT3rz7dnd3Jd2AfJX1MzY2C8tMnrgHffnm66n/D8009i6iOTxn60y5wZiKk2Yq58kHknk8ckG9kq1W1mnn1WElXJ2g6fR1yU3PQMaxtMpOQ8cfLEsWfY2ppy1bpP1qG96AKoQxyrAryF1pjWEc9YSqBoh3vNy1kS4t8pHLoHqKcnASRol7DI3Z9ayOFWSzYKUvaPvWzi1J%2bhpzUJukyRKBlHbPgmSOXB0lfy6axAsYknM9ENcg9YXgCosk7gtd88B7txsT/RlsjPnQl15efwPcTYvERqiVW8ctyR1sZclKoVep4AWUVsFdprOjHtxWlj9xYVFAt3z07JwY6tOzB58mRTWXZ2wnmNSIRi5ikEJF0CD4mqL%2bj4ke/3AJZ22I7GF0YKnXFH/a4E/VIWtuUT88sm4sLJfRhqjMCiZWvw%2b7dnQBF7EJJ%2bNb6sjMD7rv7s3VmzkZGWIn2e4YfCXZ6QJXZL85JHqAz2Md4LuJAIHx6h2NcPIiK7CfsT8nFAVYD4oy2IqzVAdshIOWOAucXdwtwdTdI721vx6f561MRXSWWiqalmLaVtKMopRtS%2baCTGJ6L95GfQxp0S/f71MzcoDF8Sv3fq41PRUNLMKuNqxMxTCzzK1wZE%2bizn2nTo3L29Ab7eH/OCXIdyvrojDzCgcjGRjMKvf/caZEEhuF4bj%2bH8WaIbNDbuAXTL0JM5A/0ngjHaEoEbpaHSxewQtOz%2bzTerFU2pjqnU28cbpbnxYPbxIHIGeCTcxaK0r7D%2byDdYkAsEZQGeKcCcGAluSgN5DHWCu65Is7e04q3QlvbMyLq6hsRGEBGpMo5qeUw1TiU3oyW7HWfyO6gk6kWio4UQTqkboSmqRPS%2bGGzaFMpOVzSxshgdjkeVGYoiS8V1ZHdxnof3FtmMXwqLRsg8TuCVQCyG8p1Yb00Yhhv2AY3bMXDMB3ezqd9Xz8DdjD9wkajrcyQRZqEn/Q%2bs/q/TUfHpa7i2Y/J7ATmG5esKv8POww2G5JJjrESbgDP12/F162o20uWDr5rWMO%2b0a8yn8DjzP6JBwJEa5lvQAN%2b8s8w9vgLOUSfhrM5aWnjo%2bMky9SkUJdJqL0HLSuN1KJPrGFUDgXEZHnwlSJ0ea8lpZ53FF3E0%2bgSTr08YTd2WAcWGxMHotfLFltnftTL8BxsetuY8sMHSC4hFURatANXvsDu8xc2ZLdYJRJrgxFeGUm%2bBg9RX7MJ6S93ZdfKcm1r324aLvvqecwu6Bzr8YOhwZaxjDkPnbOAzdxjPe8Jw3oN1t4Vg5dFTWFC9E0uqd7HF1buwuHo3FmjD2ELdHgTrw43Bur1scdVBLNVFsg%2b0B7FCE81Wl8fiz6UKdlRVYdDKawyU3fmqT7q3OtQxnvmPR5Qb4zcmSenbMxEfmtSYuDnlRc6vOaPdOnz1/vs3Q3pMe34WD5hvpFJI5EfFyjDPicPA1/9mUfi6H/0FDhjimyM6dwx/JmPD52Ug4ky67A9c8QEuuAGfyxi%2bDgFuUvt8YyOGaeYHO2VsiOxohz/bUZrd76eNYot1kQjWRrIg3QGsaVVhdUsiW96oQMjpWCyoiWB%2bleEkyAG2UH8AgVX72BJ9JDTqOjSmnEVtciP0CfWoVIryxpOdQRd/auRY5EmoNqciYVNypGWSlRtVdiSGZXzfbpDYD7SUwkGqAhyjtC7grTHfFLFskBiPibUCx0BPtv3XfSddLnHyQ50%2bBBkG2z0Zu7bG2H01RTpTk4Dighi2J2wD2xW2DX1XDmCkcx4b6PQDzntJmQ1/OS/TRklLiViQbj%2bLbi6APCuZRWUmQHE4nSmLM5i6rpjtbctDYCV5gz6SPCUSIdqDdwuTyg9o42oyyANqiTjP7AN8rc/zQ2P6WaRtU9%2bKWadws5An4rYW4hYRvh8C1mb7C8JNwrdUEtvJaqk6ZJDdTZ7C9wE9qGN8m1z/%2bW8/fMVu6Jz3NCI/NEoiDLR7M1wJRIM%2bFT9/5mXKxrb3St0jv8D1LjWkC57o7/BlJADyGz8xkAAsuHIvVjQpWUZR3n2t8aQJEzHJegKiE%2bVY15aKQE24tLQumnvD1fv29xRVD5EAz9KMzqCMv6AkWrOZZv9Z/l3iphRbImxtFsGKPOKfbxJaNkaJHN8ZfpaOn6Txj253D1/yfWi4S3YFl/3Q1%2bYp4cYKpCbsFgR%2b%2b9uXUHQkFV2tJzB6tw34ZiMGzrmxwS7hAexQw3r4aKNAHsACdfsQ1VoAZX4aEnLTsHLlyjEhFNkpWNOSiCDNXuPS%2bhgs0kV05aaW2DUcbLQ5mJfzL3%2bjZdZ/lPz4rfF/5hm8U%2bTrBfresl1u03vUyXqg1kOEDQmgwxcB3AOMuBbIasqU4oe//tprqNEeQUzEpwhe4IfTmjjgajDr455yfj7i60MZCUAxfQCL9BHMXxOO1W0q6L48g7feMK3swnaGIfryccjKKUnqI408LwTrIk7z966siLVWqQutzP8BUFdXZVOpqLE9GVNpm/xpuhAmb0/hjxO/rxka/ydI7g//IOkR5%2bytyO05caEwxb4KXwVisENmYBe92NWzKkx%2b5Kc/2PZKT9oPXF%2bBvnNeYF3z2cG6LYxCAEIASoABur3Iv6DHrHdmiuuXLQlB2tVK%2bFRw8hFE/IAxpCGOi1XO30vWms5ZBBC/nxKgFVUBq5xdBeK4cP/x/59/ZYY7ZWMCkP2ECzDU6WsY6XRF3zUFXvilqedXxh3A9YslGL7TAgwVstHz89kgJUzpMx8WXreN%2bVJ5W0qzL9PshvqaDouCFor7fLy8UXyjCX41%2b3gCFB5CZA0fNMZxIXL5e8nacAEeyIdI3xOgU%2baKq/4Y6vI1Dp5zZrh5EHPmmhZN0ZF7kK%2bOwIchPliyZAn7x6VYIj%2bP3WnxxpbqHQjURzH/it3Y1ZWHzVu3iHsmP/wwktNSkFqej3R9Idvdms0CtXt5CIwua1ZwMUQaX1QVaUtjqwf2IQFEDhjqkv2OavzoyHlf9J11ZfhuB1auWvP9EGDP/fItfNGexq5o5qC2wElaVblrMLg6iuJ7J1NeKkGgt98PwoZewLLKjmBZo1xaoNk3%2bkGTHEFl4aH8vUGle2wftAdYm8Y%2bU2l8Q7roR3nARyJLeSCJ7dgWyhTR21FRFMsutaaykb%2blse5ziw1njs6G9qjHroCq6Mshp6K4S0tLa6JYWlsJk%2belsMg0BYtMjGWb92xnO8J3Ql5fYHTP3Ajv7C20tF471ti4xn/8QGd/DObjRlzxp25PZhzsmM%2bki74Svv2LETc/MuDLhQZc8jZKn7kZBju80JA3J/vnl5unUOLrXVwVyV3asFC73xig32dY3qQwfNSqMmxoPzS6uTPTsPVCzohfcRhcEv4Mt8RPVo%2bRV5rIU1l8sCJQNbAxVwI1rvnzjnB4hJoi4wVfsAteprb4C2qPPydcDcTNBq/O9t9Y/URWp3xhMWX/pXUx4M1NSEMsd3MsJcux%2bDQ1PHVRWNQQDc%2bM0H4X5ccu/D00tvVI3yA8z0sdahV4YveDE2BIVAIfO7MYu3B3MXhDRCIY6PjWcJdvM9kcQhghkM7/J7uyYAq/fr12%2b%2bRgfcTvyQveJw9wpzAIIruKsJGwkxBD3pG2sGJfjkfahtf5PfPS1tvNS1on3u2mWmvlmbLe6oF/7uUB2duErQR3wnTCo//qnqpyX5v/7Xvck9eNdXWc/P/l578AjufF27Pdj9IAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="120" data-src="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png" data-srcset="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png 120w" data-sizes="(max-width: 120px) 100vw, 120px" class="text-ui-primary g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png" class="text-ui-primary g-image g-image--loaded" width="120"></noscript></a></div><div class="w-full px-2 sm:px-4 max-w-screen-xs"><!----></div><div class="flex items-center justify-end px-2 sm:px-4"><!----><!----><!----><button aria-label="Toggle Darkmode" title="Toggle Darkmode" class="ml-2 sm:ml-8"><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div></div></div></div></header><main class="container relative flex flex-wrap justify-start flex-1 w-full bg-ui-background"><!----><div class="w-full pb-24"><div class="flex flex-wrap items-start justify-start"><div class="order-2 w-full md:w-1/3 sm:pl-4 md:pl-6 lg:pl-8 sticky" style="top:4rem;"><div class="mt-8 sm:pl-4 md:pl-6 md:pt-12 lg:pl-8 sm:pb-16 sm:border-l border-ui-border md:mt-0"><h3 class="pt-0 mt-0 text-sm tracking-wide uppercase border-none">On this page</h3><div><ul><li class="font-semibold depth-2"><a href="/templates-language/go-template/#go-ddd-tutorial" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Go DDD tutorial
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#model" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Model
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#code" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Code
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#test" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Test
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-eventgo" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · Event.go
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-policyhandlergo" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · PolicyHandler.go
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-policyeventgo" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · PolicyEvent.go
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-externalservicego" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · ExternalService.go
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-externalentitygo" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · ExternalEntity.go
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-repositorygo" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · Repository.go
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-routego" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · Route.go
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-maingo" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · main.go
        </a></li><li class="border-t border-dashed border-ui-border pt-2 mt-2 font-semibold depth-2"><a href="/templates-language/go-template/#go-전용-template" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Go 전용 Template
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-dbgo" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · DB.go
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-kafkaprocessorgo" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · KafkaProcessor.go
        </a></li><li class="depth-3"><a href="/templates-language/go-template/#·-utilgo" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          · Util.go
        </a></li></ul></div></div></div><div class="order-1 w-full md:w-2/3"><div class="content"><h1 id="go-template-만들기"><a href="#go-template-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-hidden="true"><span class="icon icon-link"></span></a>Go Template 만들기</h1>
<h2 id="go-ddd-tutorial"><a href="#go-ddd-tutorial" aria-hidden="true"><span class="icon icon-link"></span></a>Go DDD tutorial</h2>
<h3 id="model"><a href="#model" aria-hidden="true"><span class="icon icon-link"></span></a>Model</h3>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1177' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-453caa40253e6bda86aa54c211e5b2f1'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-453caa40253e6bda86aa54c211e5b2f1)' width='2560' height='1177' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAdCAYAAAAaeWr3AAAACXBIWXMAABYlAAAWJQFJUiTwAAAIiElEQVRYw91Ya2xUxxW2%2bqN/KiXqz7T9kT6lqupDqgQKlGIeiUpxwGkgpChBhEgkUpGSNoqatFGCMcbYgB%2bEEHAKmAJ2AiEQBwgB2wRHwcb1C5v1k/Xa%2b37eu3fve19fz8zuOmsHHBu2rZsrfZr7ODN35ptzvjMzeQ%2bWufCT3S78dI8TD5QF8eiuT/BicTWe3NGOTSVX8cNdHjxY5sT3ye7/FT8od%2bK7Oz1YUT2IzUet%2bM6OEH5Z7cavqj3I%2b9brDnyvNEXCN9/w4ddFLdi2Ywv%2bsqsYC1/5FPcXuXHfGw7ct3Vu4P6tzhSKXDOu8%2b2t4/jGax48VdmG%2buYD%2bNHei/gxTezPKt3Iq2hyo7LZjV2XHKi6PI6SRgFvX7Wh5rMBbG8KYnejG3vmEMovOVF20Y4dF8ZS75o8dwb/7sWeZj/Bh/LGAA629uFYRwt982IXfc%2bLqhJCIQmBgACnOwDEVMBUgGQcgE4w5wgMQhSC24aQaxRJTQQSWup9Ur8NaBzsCnwG%2bK8Cmp3b9o7JsNh1mLrG280bD%2bg436ugcUDDe10mxnwyIhEJYjgCVTcI5hyBAY1KISxxKJqBiKIiIqupcgokWYGsmdAkH1QGRYZumHAJKrwi2agGbzMvFmUMEsMJA8mYAdM0YRipMnM/lxCNRjmy%2b3hnUJ1onMM0U3XiUZMjM7Y8diNFFKiazhkyjHTF9A%2bnEvK/wNS%2bzBxUn9Wbpn4eY9PldEAKixPMZmMuEPCfRJ6pk1i0voq4txNGjGTB0O844LubBeOOpOa6vbsiQCM1PNXYgRGXgEQ8OqnR6UjIxCKLrWywd7FYDFFmMxXc/ssaY2Z9ywZ7F4/HeXssLLPxxf/vzUPzVFLKistRDLl0ynxGWgem9wBd1yl1hhAKBiEIIQihIIdI936/D16vG8GQgKAgUinyktkHAgEoijJp1tkgZFnm3wRBQIjaYLbs3u/3w24fg9vjQUhSIXBoCIkRsglyO9aXe/IAncSv58N%2bBMdDiCWm94DsDkciESSTgGrEoRgJDhZCPr8Iq83FMwpMiVJ3hBKMRN4V46IkiuKXCAiHw9A0DYlEgjyFPCgaI/sEwjTQwREHXGNWmM7rMFwdVLYhEbbxFB8m3WKEzjwr3IYAgzRAslZDlyygf3%2blBrCfRSIyNFUGjR1/P6vg2SMBbDrkx2tnRBhSPw3ainBLEay1hRg8ug6%2bU%2buRkMbBllZhUeAuzVw7A4nyepwWXkpQxecnrqPp6BU0H/kco609VMMOaegDDL25AL17F6Fv9y/guVzECYhI4dwQYLbXwvCO0gwmJqWMryJAoxl/usaH/JJR5NN%2bYuMBC7o/WomhS8sxVrcUbaXz0VXxEHqrFkD3DXAP4aFCXmC32%2bFwUPaRaGFD4WKSx9gHHXi3%2bH28u/09Ki%2bguWYnes8vQHf9MrTvXoSuvUtxs2oebB9vyyEBqg5x3w0oQ0GYSXJTfXYEbHjHj/ziISLBjg37%2b9F9bjVuNa9A5BwR8eYi2P%2bRD%2bHYUpj%2bfqhmAsGAf4KA8fFxHuvBQBCaoeFWnxXHt9ajbns9jhc14Ny%2bUvR9vBjuS6vgObwEXbvnw/HWz2G2laYJyEEIqJQFqoZPoz88Rq6bIBGcOQE6EfDXs1E8cyKOZ%2bqAl05YYG0uRKhjNcQLq9D79ip07i/AraNrqLeTQ4DFO0N2CMg%2bBS2Hr%2bHasTYqO9F9qhLWK8toKV8A77n16D39Onrq/4xQ34ecACkXHqCRCH5Q2wL7kJc6MTMPYCLIwK6UCCahsMxw82UMXnwY/RceRqBjE1TRAb%2bP1uGyxG1Z3WwRZAqeEUH2nEwkoSu0IqV9iiEMwXttHfrO/w69Db%2bF31LCNUejOIrGkykPICG%2bZwJ0CoHuMgsCA5QFktFZE0CbiHSpI35rC4T2AgSvF0AdeC69i/vimkpApj2mA%2bw%2bdSXTxsPQ%2bx5D6F9/QLD1ESjWsol2kskcEsAqyrEkzWRq3WyY5qwIkDRKVzRjomIg1P8qzJuFiFoeQ3RgM%2b1IncRBhKaTtq5JSnGU3qbzANJgBOUYBGrPHxiFcGMjYv1rEbcUAI6yFDl8CxzLHQEmiY9sOwBNmH0aVMj%2bxZMyzwTrDwp4pa4TWu8a6JbHEWgowGjtGgzXroWr/gnERRv3FZa7Wdxna0BYivC9/mAAWFcTxlMHXFj9loyDDWeB4RXwfLoKA4d/j54jG2A59DjGmyvTBEi5SYOqsw4aiZRhzjwN6kSATB6%2bbp8dS0tGsHiHA88e7IN%2b80noNGv9tcvQUf4QeqoW4nr5PPitneRlMfi8Hr7qs9lsGB0d5R7h9fpgahKaupxYXDyMFTsHsaDYi/K608CtlXA2FaKP1gBdFQv4OmDkzMs5JMBgBwMkPno0vQ02Z0XAE/tcyN8%2bgkUlTmzczzygEIblUUQalmOgeiHG3llMaXAJNHcfJAoTj9vFl7BsDcBSIUuDbo8XhiKiuceL32y34ZEyK%2bYVB1F67CQwtBx6eyG8tUtwo5rE8NB8xNtLc7cOyBwcZAafujdnFgJEwN8%2biuFPJ2N4nvq6rcEFfegFmNYXIF95Dr01a9CxfzVG/vlHQHbwEJCmhACDxEKABNgaAraciuOlMzFspvaONzYC1qehdT8P%2b4m1aK1eifaKfARaKnKXBqfbpk4nguzH7KIl%2bwQSyUxWYIhzLxEFWmAZWsqWBn4nEWTvJl%2bsQRLahMLP90wlhLDfAcE7TqkyzC0y/ciBB8z8ZCZDQGYnpmkq5W2NQ%2bPQJ8A9iux1fp6nc9VmBGQfvGQIYGDtqaqaAm/L4FBZyUKTHWsRNN2Y2JEy23vaDc6WgEzJcneq49LEAG4PkZcZe0bSVE9j76avn4aYRvobI/SeD0Tu5nwu%2b0BktpjuQCQX7f3XPOBrcyT2dT3snCn%2bDadMot/kA4BFAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="2560" alt="model" data-srcset="/assets/static/model.82a2fbd.cab783dc59d62b32f567201f4f48855a.png 480w, /assets/static/model.cbab2cf.cab783dc59d62b32f567201f4f48855a.png 1024w, /assets/static/model.2665e34.cab783dc59d62b32f567201f4f48855a.png 1920w, /assets/static/model.42db587.cab783dc59d62b32f567201f4f48855a.png 2560w" data-sizes="(max-width: 2560px) 100vw, 2560px" data-src="/assets/static/model.42db587.cab783dc59d62b32f567201f4f48855a.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/model.42db587.cab783dc59d62b32f567201f4f48855a.png" width="2560" alt="model"></noscript></p>
<h4> Order </h4>
<ul>
<li>Order의 event는 OrderPlaced, OrderCancelled 두개이다. OrderPlaced는 PostPersist로 trigger를 설정하였고 OrderCancelled는 PreRemove로 trigger를 설정하였다. </li>
<li>OrderPlaced 즉, 주문됨이라는 event는 Pub/Sub 통신으로 kafka channel에 event를 발행하여 Delivery Service와 통신한다. </li>
<li>OrderCancelled 즉, 주문 취소됨 이라는 event는 Res/Req 통신으로 REST API로 Delivery Service와 통신한다. Delivery Service 안에서의 DeliveryCancelled logic이 선행 되고 나서야 OrderCancelled의 logic이 수행된다. </li>
</ul>
<h4> Delivery </h4>
<ul>
<li>Delivery의 event는 DeliveryStarted, DeliveryCancelled 두개이다. DeliveryStarted는 PostPersist로 trigger를 설정하였고 DeliveryCanclled는 PreRemove로 trigger를 설정하였다. </li>
</ul>
<h3 id="code"><a href="#code" aria-hidden="true"><span class="icon icon-link"></span></a>Code</h3>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2560 1323' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-3a15e408826d712bdf2ab83497db8277'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-3a15e408826d712bdf2ab83497db8277)' width='2560' height='1323' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAhCAYAAABpwa0hAAAACXBIWXMAABYlAAAWJQFJUiTwAAAIn0lEQVRo3tVYaWxU1xm1qgoJs0iAixCYfd/3JZH6t1L/VG3/tKnUH02CWpoACUZpCGIpElQEoSpqgEhA3SixDHYB22OP7Xi3Z96MbYgaUEu9zIz3dezxOl5mOb3njq8ZP4/tGS9KedKZ%2b%2ba%2bO3fud%2b75lnejVp7KxJoPMrH%2bQyNiTuXhx6c/x1snzuIn73%2bJn713F7Gns8Exq15jxAr86GQW3jz7CL/8cwpi/liAzXHZ2HI2C1Hzj2dg%2bfsBEn54/Bts/8M9nHjvV/jNyd9j929vIfrddMx/JxXR76TNCTj3/LdfYfbnT8PC4wb84N1s/DQuHlfvnMemc59i3YcGbDiTjagzd7Jw5otMnL6Vgbjb6TjxeS7ibj3C5fgniIs34eN7%2bfj4/gju5Y0gcP8n9f1%2b/rRx7n4BPvl7IT6JL5TtmP%2bbBZwTc350NxcfCPtO3ckR3x/iasLfEPeFEadvCwKspiLk5RchJycfmdl5sBbnISstBR2tLQhc/hH48OryY%2bzlnyY47SB8Az3w9HfBP9g7w/lC/0djXR0K8nLxXbkZxhwzMnNKUVxswotnFkSl55rxWWIJ7iSb8ZevLTB8U4LUVANs9hq4urrxr%2bcvUFFZhf/8t0LiZUUlunt6Ya%2bpRW1dPVpa2yQ1XvHh9UcAX2Bx9Q2NcHa44B4YRJ97AB7R7xGTebz%2bGcAn5xkc8oB/U2WrRVpGNopNZuQVmZAvjC8s0WAyCwKsVg3fllvwrExDubg3m81IMxhRbbPLBfb3uzE0NCQxMDAg4fV6MTj46rvf7w8Jn8%2bH4eHhSdHX1yf%2bo1/MNyjncrvdswbOy8tmcyAjIxMmQYDVoglYJDRNQ5RF3BQVlwg2hPGaIiADVdU2THTRuOCLhiqDVUuS/l8u2pKeHiCARivQdkGAFZnGDBQVFsgOSUBaBqqrAwqoE/5TX18Pl8sVkohgMtQ9d5MktLe348qVK7h48SKuX7%2bOmzdv4saNG/KefbOJCxcuyP%2b6du0aLl26hPPnz8v/kgqwO2BIN44SYBnZ/QAB5hJ8G/87lGZ/DbP1Kcwm0wgBAQX09vais7NTSpWyUpIPJiAYvDiGV0VFBWJiYrBw4ULZEosXL8aiRYsQHR09DgsWLJBjpwP%2bdunSpdi4cSOWL1%2bOefPmYcuWLWJNPtgdNTAYJiCAO3799ld4klmAslKrHBSsAF7d3d3o6upCW1ubhJ4AvQIUAdXV1di%2bfTs2bNiAXbt24eDBg9i/fz%2b2bdsmv%2b/duxd79uyR7e7du2U/x65fv360DQccu27dOmzduhVHjx7Fzp07ERsbizfeeFOuyS4C%2boQKYCQ8c9uKR5kiCJZq4wjweLxoaGxEa2vraFDRu8BECiABmzdvxtq1a%2bWCuFAujoaSGD7jjm3atEm2NGb16tVYs2ZNxODvOD/J5FwrVqzAkSNHpibALIJf4s1k5KWLGkAowKwjgBP0CAW0NDdLJdA4ZgR9IAyuDwZDEMBFctf37dsn%2b0gCF01iFJTxbCMhIni8asMmQNNMKEo5C3NRMjRLuQiCprEKGInmNrsdDQ0NaBMFUrMgY0ikMFkeMeoHgZfbHZoA7gz9knJV8g3XwHCeq5b/FzYBFmGw5cvL0LLToFnLAgoQabCyygaXsKOhcxAtPV48fVGN544OVLZ7UeMcRku3B81dw2PQ1BXod7SIyk4URjZBgDKYi6JEKX3lApS%2b2vnJEAkJEROgmTQUfpSIkkd50MqtowQwd7rF5jt7h9E94Me/Kx2oqneipt2Nhg43nD1DEp19Hrj6PegkxH2X24fmjj5ZgVVXV0ljudP0fbqAigE7duyQBCg1cOGKKCK4P9K4EBEBJs2MuMefIrnQgHJLmSiIdDHAF3gHqKmpQXNTIzqd7ejscKJDwCnu/b7xBc/QYMAFqqqqZGRWhtF4xgAV%2bdkyKxw4cEBmAZUN2M9x/K1e4uGQERkBwuAbl%2b8i/XE2SsvGp0GvN0BAbW0tWlpa0CkKItYFLIyYIfTZIDgLkACV2rhwGshF0UgaSMNVn%2bqn0QTVoTc2XCVE7AIJJ5OQ%2b898WMvHZwHfiAJYDTIV9vT0yJqABKhydzICaIySMg08dOjQqLEkgK5AFXDXWSfwGZWi%2bthyLGPFnLgAb4pLy2Ea6dSXwooAh8OBpqYmIf0OCafTKUvdUEVRKAK4ewyINFgFQKqDLceoZwQzB8ewj2P4PZI4EFkWEDGgJO0czAVJIdOgIoAuQAVw9%2bkCBEvjcF1AFUOrVq0al/vVPZ%2bp5/pxcxYDWAeYjFdFHZAuCCidUAF0AZbBrpEYQChDg1UwGQHBxuqLIH061Pv8nCmANyZN7LxmDcsFKH0qQcHj8UzqAiSAWYCtygIKDICMA/R9lQno9wTH0zXoEnSFOYsB/LBYNInJCFAuQAXwzTD4/T%2bcGKBKYWUsjWR7%2bPBhGejYT2PDrfZmVQHBmMwFFAGhXoqmcgEuXFWASg3qXr0IBfv5dKrBaSsguFNPgKoDbDabdIHggxH9q/BUCtBHd3Wv4sFkhs5dFpiCACqALz%2byCJok8k%2blALUwBb3Rs4lZJYAT8C2QBDAFBkd%2b/StxqPMAVfOTBCV99qlDDD3Ue8BMQMUxjR47dmzmBChDGASZARgApyKAZ4LqSIw7zCMqtiq3qxcfvSr4TBHA8StXrhxNkTzuWrJkSVhYtmyZPCYj2aMEGGagAB6AMN2pyD8VAWoMFZOcnIwHDx5IPH78GKmpqbJNSkrCw4cPx4BjgvvV74jExMSIkJCQgCcpKaPH4jOKARNF%2b1CnQpM9%2b/6Oxe1jjsWnJsDw6lRY5frpgL%2blcr4PBF7TAy9rtY5IFSAIsNsdeJ2vus5hvHXfjl/H1%2bOrnBcoyMlGcYkpHAI0GI1ZePmyQp7tuVxdwpe7Xxu4XN1w9/Xgub0Nv/jrM/z8s%2b/wD%2bNTFOXlCgLGK%2bB/vjt/OFqf9jMAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="2560" alt="code" data-srcset="/assets/static/code.82a2fbd.21ac0f1bd651790129b44d98ca9b08ec.png 480w, /assets/static/code.cbab2cf.21ac0f1bd651790129b44d98ca9b08ec.png 1024w, /assets/static/code.2665e34.21ac0f1bd651790129b44d98ca9b08ec.png 1920w, /assets/static/code.42db587.21ac0f1bd651790129b44d98ca9b08ec.png 2560w" data-sizes="(max-width: 2560px) 100vw, 2560px" data-src="/assets/static/code.42db587.21ac0f1bd651790129b44d98ca9b08ec.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/code.42db587.21ac0f1bd651790129b44d98ca9b08ec.png" width="2560" alt="code"></noscript></p>
<p>EventStorming 된 화면에서 우측 상단의 code를 클릭하고 언어를 go로 설정하면 위와 같은 code가 생성된다. 이를 다운 받고 싶으면 Download Archive를 클릭하면 된다. </p>
<h3 id="test"><a href="#test" aria-hidden="true"><span class="icon icon-link"></span></a>Test</h3>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1588 430' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-64553b6fd91f75233d00f60e921959c4'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-64553b6fd91f75233d00f60e921959c4)' width='1588' height='430' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAARCAYAAABtu6qMAAAACXBIWXMAABYlAAAWJQFJUiTwAAADcUlEQVRYw9VX23KiWhTMPyTxgtwFRMEbKooX1KgxyVTl1Kmah/mCecj/v/dZvSOWx0rNVN7wod2wgS29dq9eiztd1xGGIcbjMfr9PrpxF4Zjw7QsmHEfdraGIWO700Ecxwrdbhdpmqrj9XqNzWajxvl8rq65rgvDMGCaZulxp2kahsMh3t/f8fbjDavlEkbkw/Q92Ms93F%2b/YeRHTEYJdrs9ttutIjybzdRzeZ5jMBhgKc/1ej3U6/Uz%2bVsIwh0V0G63FTFiNBrBCFyYrgMrXcJ5%2bRfWLIcpZBaLBQ6HAyaTCRg4olarqbHRaCgUC9%2bMAoqX5ctz90jGaOhC2IROYrWqnGuw5D7ew%2bsMWrGAxVS5WPBWiJ8DcPnCvu8jCAI4jgNNyDqSy37QgqHI64rcJeGvpH5zAeAPd7TVap3NjblNI%2bNIcyQpBkaZ28XuX%2bOa/N/OS6MA27YRRRE64vTMc45ZlqnqQOJJkiiDo9kxCJo8o4sSGlSGQDvhOiV4XPYUuSvKIF%2b0JSNNkClANXS7PRWYROZ03UAoZhk4LgZaAz3xgpGQmQpmstBE1ilMsfCKarWqUBhlGauDKoPTdIIfr0csFxnm2Qwvzwfkyzm2mxyvL0fkqwWy6QQzwSIdI0%2bGeJW5zTjBiiVQ1HGUshhJX8ByyP6AgWRfwPPpdKpUVEoFNMTho%2bEUT28/kcw2SBdbZOsDeukas80rVk/PmK5fMMye0J3kyLZvGGcrrI7/YDjfYiDEWlSJlEamCRsiKooKYo/AnoGBYJNFlZUuAKYh0nU7qHoJ6sEYNSdG1Y5Q9xM1V7FC1LwRtFaqUPNHqFmtz/ubPdSqFWh1kf5J6g8PD4oovePx8VGhUqmoa6VMAea27zURd0J02i1EnbaCOi7O26E6/t9cJ1TzcRQrn4hPaMvu00CPz89nJTAl2GyVMgU%2bq4AjZTA8uz5BQ1SQ8hhILxDIGJ7mgtOcL6MnvYMn93uhQILjSjD7vb6SfbPZVL0FwePSVgGSpGkxZ9kOs9Ut8pd9AfN3t9up/N7v95/XxdysXoh6uwmtG6C6H6HynqE%2b7kCXKkCiXPsSpUyB%2b/t7fHx8qB1jK8ydYl/APC5GgqWxmCMc%2b/TFSNhX%2bMMflrAKNFSD43neeZe%2bA/Mr3NC3gWqFrz9wvgPjCzAIxo18C/wHTGLppV0dOwIAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="1588" alt="code" data-srcset="/assets/static/run.82a2fbd.d7965bea353df9a2c527116e07bb6d72.png 480w, /assets/static/run.cbab2cf.d7965bea353df9a2c527116e07bb6d72.png 1024w, /assets/static/run.b52d588.d7965bea353df9a2c527116e07bb6d72.png 1588w" data-sizes="(max-width: 1588px) 100vw, 1588px" data-src="/assets/static/run.b52d588.d7965bea353df9a2c527116e07bb6d72.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/run.b52d588.d7965bea353df9a2c527116e07bb6d72.png" width="1588" alt="code"></noscript></p>
<h4> Application 구동하기 </h4>
<ol>
<li>다운로드 받은 파일 위치로 이동한 후 현재 directory에 main.go 가 있는지 확인 한다. </li>
<li>Application을 구동하기 위한 module을 다운 받기 위해 아래와 같은 명령어를 수행한다. (main.go가 있는 위치에서)</li>
</ol>
<pre class="language-bash"><code class="language-bash">go mod init <span class="token punctuation">[</span>프로젝트 명<span class="token punctuation">]</span>
go mod tidy </code></pre>
<ol start="3">
<li>main.go가 있는 위치에서 아래와 같은 명령어를 수행하여 binary 파일 생성 </li>
</ol>
<pre class="language-bash"><code class="language-bash">go build main.go</code></pre>
<ol start="4">
<li>위 명령어를 통해 생성된 binary 파일을 run 하기 위해 아래와 같은 명령어 수행. </li>
</ol>
<pre class="language-bash"><code class="language-bash">./main
`<span class="token variable"><span class="token variable">`</span>

<span class="token comment">## Go 기술 Stack </span>

- Web Framework <span class="token builtin class-name">:</span> <span class="token builtin class-name">echo</span>

- ORM <span class="token builtin class-name">:</span> gorm

- Kafka <span class="token builtin class-name">:</span> confluent-kafka-go

- DB <span class="token builtin class-name">:</span> SQlite

- REST Api <span class="token builtin class-name">:</span> resty

<span class="token comment">## Template code 만들기에 앞서 </span>

Go Template은 Spring-boot Template을 기반으로 만들어졌다. Java와 언어적으로 다른 부분에 대해서는 상세 설명에서 기술 할 것이다. Spring-boot 에는 library로 제공되는 기능들 중 go에 없는 기능들은 따로 구현 해놓았다. 

<span class="token comment">## Go template 파일 구조</span>

Go template 또한 Spring boot과 마찬가지로 model driven하게 code가 generate 된다. 
Spring-boot와 Go의 비교는 아래와 같다. 

<span class="token operator">|</span> 역할 <span class="token operator">|</span> Spring boot <span class="token operator">|</span> Go <span class="token operator">|</span>
<span class="token operator">|</span>-----<span class="token operator">|</span>-------------<span class="token operator">|</span>----<span class="token operator">|</span>
<span class="token operator">|</span>Aggregate <span class="token operator">|</span> Entity.java <span class="token operator">|</span> Entity.go<span class="token operator">|</span>
<span class="token operator">|</span>Event <span class="token operator">|</span> Event.java <span class="token operator">|</span> Event.go <span class="token operator">|</span> 
<span class="token operator">|</span>PolicyHandler <span class="token operator">|</span> PolicyHandler.java <span class="token operator">|</span> PolicyHandler.go <span class="token operator">|</span> 
<span class="token operator">|</span>PolicyEvent <span class="token operator">|</span> PolicyEvent.java <span class="token operator">|</span> PolicyEvent.go <span class="token operator">|</span>
<span class="token operator">|</span>ExternalEntity <span class="token operator">|</span> ExternalEntity.java <span class="token operator">|</span> ExternalEntity.go <span class="token operator">|</span>
<span class="token operator">|</span>ExternalService <span class="token operator">|</span> ExternalService.java <span class="token operator">|</span> ExternalService.go <span class="token operator">|</span>
<span class="token operator">|</span>Repository <span class="token operator">|</span> Repoistory.java <span class="token operator">|</span> Repository.go <span class="token operator">|</span>
<span class="token operator">|</span>Controller <span class="token operator">|</span> Controller.java <span class="token operator">|</span> Route.go <span class="token operator">|</span> 
<span class="token operator">|</span>Application <span class="token operator">|</span> Application.java <span class="token operator">|</span> main.go <span class="token operator">|</span>
<span class="token operator">|</span>Kafka <span class="token operator">|</span> <span class="token operator">|</span> KafkaProcessor.go <span class="token operator">|</span> 
<span class="token operator">|</span>DB <span class="token operator">|</span> <span class="token operator">|</span> DB.go <span class="token operator">|</span> 
<span class="token operator">|</span>utility <span class="token operator">|</span> <span class="token operator">|</span> Util.go <span class="token operator">|</span> 

<span class="token comment">## Model 별 Template 설명 </span>

- 현 섹션에는 eventstorming을 통해 나온 model들을 기반으로 model driven 하게 generate 되는 code들에 대한 설명이다. 

<span class="token comment">### · Entity.go</span>

- Aggregate code 만들기 

<span class="token variable">`</span></span>`<span class="token variable"><span class="token variable">`</span>go
forEach: Aggregate
fileName: <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>.go
path: <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext.name<span class="token punctuation">}</span><span class="token punctuation">}</span>/<span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext.name<span class="token punctuation">}</span><span class="token punctuation">}</span>
---
package <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext.name<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span>#eventsExists events<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token function">import</span> <span class="token punctuation">(</span>
	<span class="token string">"gopkg.in/jeevatkm/go-model.v1"</span>
	
	<span class="token string">"gorm.io/gorm"</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#commandValueExists events<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token string">"fmt"</span>

	<span class="token string">"order/external"</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>/commandValueExists<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>/eventsExists<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token builtin class-name">type</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span> struct <span class="token punctuation">{</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#aggregateRoot.fieldDescriptors<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span>#isKey<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span> int <span class="token variable">`</span></span>gorm:<span class="token string">"primaryKey"</span> json:<span class="token string">"id"</span> type:<span class="token string">"int"</span><span class="token variable"><span class="token variable">`</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>/isKey<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>^isKey<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>#typeCheck className<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>/typeCheck<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token variable">`</span></span>json:<span class="token string">"{{nameCamelCase}}"</span> type:<span class="token string">"{{#typeCheck className}}{{/typeCheck}}"</span>`
	<span class="token punctuation">{</span><span class="token punctuation">{</span>/isKey<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>/aggregateRoot.fieldDescriptors<span class="token punctuation">}</span><span class="token punctuation">}</span>
	
	
<span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span>#lifeCycles<span class="token punctuation">}</span><span class="token punctuation">}</span>
func <span class="token punctuation">(</span>self *<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">..</span>/namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>#triggerCheck trigger<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span>/triggerCheck<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span>tx *gorm.DB<span class="token punctuation">)</span> <span class="token punctuation">(</span>err error<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#events<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span> :<span class="token operator">=</span> New<span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	model.Copy<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span>, self<span class="token punctuation">)</span>

	Publish<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#relationCommandInfo<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span>#commandValue<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>aggregate.nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>aggregate.namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	resp :<span class="token operator">=</span> external.<span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">{</span>aggregate.nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt.Println<span class="token punctuation">(</span>resp<span class="token punctuation">)</span>
		<span class="token punctuation">{</span><span class="token punctuation">{</span>/commandValue<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>/relationCommandInfo<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>/events<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token builtin class-name">return</span> nil
<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>/lifeCycles<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token operator">&lt;</span>function<span class="token operator">></span>
    window.<span class="token variable">$HandleBars</span>.registerHelper<span class="token punctuation">(</span><span class="token string">'typeCheck'</span>, <span class="token keyword">function</span> <span class="token punctuation">(</span>className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        if<span class="token punctuation">(</span>className.endsWith<span class="token punctuation">(</span><span class="token string">"String"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
            <span class="token builtin class-name">return</span> <span class="token string">"string"</span>
        <span class="token punctuation">}</span>
		<span class="token keyword">else</span> if<span class="token punctuation">(</span>className.endsWith<span class="token punctuation">(</span><span class="token string">"Integer"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
			<span class="token builtin class-name">return</span> <span class="token string">"int"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> if<span class="token punctuation">(</span>className.endsWith<span class="token punctuation">(</span><span class="token string">"Float"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
			<span class="token builtin class-name">return</span> <span class="token string">"float64"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> if<span class="token punctuation">(</span>className.endsWith<span class="token punctuation">(</span><span class="token string">"Long"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
			<span class="token builtin class-name">return</span> <span class="token string">"int"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> if<span class="token punctuation">(</span>className.ensWith<span class="token punctuation">(</span><span class="token string">"Boolean"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
			<span class="token builtin class-name">return</span> <span class="token string">"bool"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> if<span class="token punctuation">(</span>className.ensWith<span class="token punctuation">(</span><span class="token string">"Double"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
			<span class="token builtin class-name">return</span> <span class="token string">"int"</span>
		<span class="token punctuation">}</span>
		
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	window.<span class="token variable">$HandleBars</span>.registerHelper<span class="token punctuation">(</span><span class="token string">'triggerCheck'</span>, <span class="token keyword">function</span> <span class="token punctuation">(</span>trigger<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        if<span class="token punctuation">(</span>trigger.endsWith<span class="token punctuation">(</span><span class="token string">"PreRemove"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
            <span class="token builtin class-name">return</span> <span class="token string">"BeforeDelete"</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> if<span class="token punctuation">(</span>trigger.endsWith<span class="token punctuation">(</span><span class="token string">"PostRemove"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
            <span class="token builtin class-name">return</span> <span class="token string">"AfterDelete"</span>
        <span class="token punctuation">}</span>
		<span class="token keyword">else</span> if<span class="token punctuation">(</span>trigger.endsWith<span class="token punctuation">(</span><span class="token string">"PrePersist"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
			<span class="token builtin class-name">return</span> <span class="token string">"BeforeCreate"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> if<span class="token punctuation">(</span>trigger.endsWith<span class="token punctuation">(</span><span class="token string">"PostPersist"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
			<span class="token builtin class-name">return</span> <span class="token string">"AfterCreate"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> if<span class="token punctuation">(</span>trigger.endsWith<span class="token punctuation">(</span><span class="token string">"PreUpdate"</span><span class="token punctuation">))</span><span class="token punctuation">{</span>
			<span class="token builtin class-name">return</span> <span class="token string">"BeforeUpdate"</span>
		<span class="token punctuation">}</span>
		else<span class="token punctuation">{</span>
			<span class="token builtin class-name">return</span> <span class="token string">"AfterUpdate"</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	window.<span class="token variable">$HandleBars</span>.registerHelper<span class="token punctuation">(</span><span class="token string">'eventsExists'</span>, <span class="token keyword">function</span> <span class="token punctuation">(</span>events, options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		if<span class="token punctuation">(</span>Object.values<span class="token punctuation">(</span>events<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token builtin class-name">return</span> options.fn<span class="token punctuation">(</span>this<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        else<span class="token punctuation">{</span>
            <span class="token builtin class-name">return</span> options.inverse<span class="token punctuation">(</span>this<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
		
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	window.<span class="token variable">$HandleBars</span>.registerHelper<span class="token punctuation">(</span><span class="token string">'commandValueExists'</span>, function<span class="token punctuation">(</span>events, options<span class="token punctuation">)</span><span class="token punctuation">{</span>
		for<span class="token punctuation">(</span>var ele <span class="token keyword">in</span> events<span class="token punctuation">)</span><span class="token punctuation">{</span>
			if<span class="token punctuation">(</span>events<span class="token punctuation">[</span>ele<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'relationCommandInfo'</span><span class="token punctuation">]</span>.length<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token builtin class-name">return</span> options.fn<span class="token punctuation">(</span>this<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token builtin class-name">return</span> options.inverse<span class="token punctuation">(</span>this<span class="token punctuation">)</span>
		
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>/function<span class="token operator">></span></code></pre>
<h4> HandlerBar function </h4>
<ul>
<li>typeCheck </li>
</ul>
<p>Entity의 attribute type들이 java 기준으로 되어 있어 Go에 맞는 type으로 변환시켜 준다. </p>
<ul>
<li>eventsExists </li>
</ul>
<p>Aggregate에 연결된 event들이 있는지 확인 한다.
Go에선 import를 하고 사용하지 않으면 build error가 나기 때문에 event가 있으면 import하고 없으면 import를 하지 않게 해준다. </p>
<ul>
<li>commandValueExists </li>
</ul>
<p>res/req 통신이 있는지 확인 한다.
있다면 external를 import하고 없으면 external를 import하지 않는다. </p>
<ul>
<li>triggerCheck </li>
</ul>
<p>event에서의 trigger를 확인한 후 Go에 맞는 trigger로 변환해준다. </p>
<table>
<thead>
<tr>
<th>Java</th>
<th>Go</th>
</tr>
</thead>
<tbody>
<tr>
<td>PostPersist</td>
<td>afterCreate</td>
</tr>
<tr>
<td>PrePersist</td>
<td>beforeCreate</td>
</tr>
<tr>
<td>PostUpdate</td>
<td>afterUpdate</td>
</tr>
<tr>
<td>PreUpdate</td>
<td>beforeUpdate</td>
</tr>
<tr>
<td>PostDelete</td>
<td>afterDelete</td>
</tr>
<tr>
<td>PreDelete</td>
<td>beforeDelete</td>
</tr>
</tbody>
</table>
<h4> 세부 사항 </h4>
<ul>
<li>Aggregate 당 하나의 Entity.go 파일을 만든다. </li>
<li>Event 객체들은 lifeCycles 객체 안에 들어 있다. (Events 객체도 독립적으로 사용가능)</li>
<li>lifeCycles 안의 trigger는 annotation 형태의 trigger가 아닌 trigger의 이름만 가지고 있다. </li>
<li>Event와 연결되어 있는 command 들은 relationCommandInfo 객체에 정보가 저장되어 있고, 각 command 정보를 가져오려면 relationCommandInfo 안 commandValue 객체로 가져와야 한다. </li>
</ul>
<hr>
<h3 id="·-eventgo"><a href="#%C2%B7-eventgo" aria-hidden="true"><span class="icon icon-link"></span></a>· Event.go</h3>
<ul>
<li>Event code 만들기 </li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> Event
fileName<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token keyword">struct</span><span class="token punctuation">{</span>
	EventType <span class="token builtin">string</span>	<span class="token string">`json:"eventType" type:"string"`</span>
	TimeStamp <span class="token builtin">string</span> 	<span class="token string">`json:"timeStamp" type:"string"`</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#fieldDescriptors<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>#typeCheck className<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>typeCheck<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token string">`json:"{{nameCamelCase}}" type:"{{#typeCheck className}}{{/typeCheck}}"`</span> 
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>fieldDescriptors<span class="token punctuation">}</span><span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>

<span class="token keyword">func</span> New<span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
	event <span class="token operator">:=</span> <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span>EventType<span class="token punctuation">:</span><span class="token string">"{{namePascalCase}}"</span><span class="token punctuation">,</span> TimeStamp<span class="token punctuation">:</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

	<span class="token keyword">return</span> event
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>function<span class="token operator">></span>
    window<span class="token punctuation">.</span>$HandleBars<span class="token punctuation">.</span><span class="token function">registerHelper</span><span class="token punctuation">(</span><span class="token string">'typeCheck'</span><span class="token punctuation">,</span> function <span class="token punctuation">(</span>className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"String"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">"string"</span>
        <span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"Integer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"int"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"Float"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"float64"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"Long"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"int"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">ensWith</span><span class="token punctuation">(</span><span class="token string">"Boolean"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"bool"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">ensWith</span><span class="token punctuation">(</span><span class="token string">"Double"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"int"</span>
		<span class="token punctuation">}</span>
		
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>function<span class="token operator">></span></code></pre>
<h4> 세부 사항 </h4>
<ul>
<li>하나의 Event 당 하나의 Event.go 파일을 만든다. </li>
<li>typeCheck라는 handleBar function은 Entity.go 와 같이 go에 맞는 변수형으로 만들어준다. </li>
<li>Spring boot code에선 Event 객체는 abstractEvent 객체를 상속 받아 사용되는데 Go에선 상속의 개념이 없어 abstractEvent의 주요 기능들은 모두 Util.go 안에 여러 함수들로 추가 구현 되어 있다. </li>
</ul>
<h3 id="·-policyhandlergo"><a href="#%C2%B7-policyhandlergo" aria-hidden="true"><span class="icon icon-link"></span></a>· PolicyHandler.go</h3>
<ul>
<li>Pub/Sub으로 연결된 policyHandler code를 만들기</li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> BoundedContext
fileName<span class="token punctuation">:</span> PolicyHandler<span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span>#policyExists policies<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"github.com/mitchellh/mapstructure"</span>
<span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>policyExists<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span>#policies<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>#relationEventInfo<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> whenever<span class="token punctuation">{</span><span class="token punctuation">{</span>eventValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token boolean">_</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span>data <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	
	event <span class="token operator">:=</span> New<span class="token punctuation">{</span><span class="token punctuation">{</span>eventValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	mapstructure<span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>event<span class="token punctuation">,</span>data<span class="token punctuation">)</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>aggregates<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">:=</span> <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span>repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>aggregates<span class="token punctuation">}</span><span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>relationEventInfo<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>policies<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token operator">&lt;</span>function<span class="token operator">></span>
	window<span class="token punctuation">.</span>$HandleBars<span class="token punctuation">.</span><span class="token function">registerHelper</span><span class="token punctuation">(</span><span class="token string">'policyExists'</span><span class="token punctuation">,</span> function <span class="token punctuation">(</span>policies<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>policies<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
		
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>function<span class="token operator">></span></code></pre>
<h4> HandleBar function </h4>
<ul>
<li>policyExists</li>
</ul>
<p>연결된 Policy가 존재하는지 판단하는 handleBar 함수
연결된 policy가 존재할 때만 mapstructure를 import 한다. </p>
<h4> 세부사항 </h4>
<ul>
<li>policies라는 객체 안에 연결된 policyHandler에 대한 정보들이 있다. </li>
<li>해당 policyHandler와 연결된 Event 객체에 대한 정보는 relationEventInfo 객체에 들어 있다. </li>
<li>각 Event 객체의 세부 정보는 relationEventInfo 안 eventValue 안에 들어 있다. </li>
<li>Spring boot code에는 PolicyHandler 안에서 모든 message를 읽고 객체화 하여 자신이 원하는 객체 일때만 logic을 수행하는 코드를 validate라는 함수를 통해 수행하는데 현재 구현된 Go code에서는 KafkaProcessor.go 안의 KafkaConsumer에서 필요할 때만 logic이 수행되는 함수로 message를 넘겨주는 형식이다. </li>
</ul>
<hr>
<h3 id="·-policyeventgo"><a href="#%C2%B7-policyeventgo" aria-hidden="true"><span class="icon icon-link"></span></a>· PolicyEvent.go</h3>
<ul>
<li>PolicyHandler와 연결된 외부 Event 구조체에 대한 code 만들기 </li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> RelationEventInfo
fileName<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>eventValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"encoding/json"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>eventValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token keyword">struct</span><span class="token punctuation">{</span>
	EventType <span class="token builtin">string</span>	<span class="token string">`json:"eventType" type:"string"`</span>
	TimeStamp <span class="token builtin">string</span> 	<span class="token string">`json:"timeStamp" type:"string"`</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#eventValue<span class="token punctuation">.</span>fieldDescriptors<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>#typeCheck className<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>typeCheck<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token string">`json:"{{nameCamelCase}}" type:"{{#typeCheck className}}{{/typeCheck}}"`</span> 
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>eventValue<span class="token punctuation">.</span>fieldDescriptors<span class="token punctuation">}</span><span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>

<span class="token keyword">func</span> New<span class="token punctuation">{</span><span class="token punctuation">{</span>eventValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>eventValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
	event <span class="token operator">:=</span> <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>eventValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span>EventType<span class="token punctuation">:</span><span class="token string">"{{eventValue.namePascalCase}}"</span><span class="token punctuation">,</span> TimeStamp<span class="token punctuation">:</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

	<span class="token keyword">return</span> event
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>function<span class="token operator">></span>
    window<span class="token punctuation">.</span>$HandleBars<span class="token punctuation">.</span><span class="token function">registerHelper</span><span class="token punctuation">(</span><span class="token string">'typeCheck'</span><span class="token punctuation">,</span> function <span class="token punctuation">(</span>className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"String"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">"string"</span>
        <span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"Integer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"int"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"Float"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"float64"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"Long"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"int"</span>
		<span class="token punctuation">}</span>
		
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>function<span class="token operator">></span></code></pre>
<h4> 세부사항 </h4>
<ul>
<li>Event.go 코드와 동일하나 PolicyHandler가 붙어있는 BoundedContext 쪽 service에 구현된다. </li>
</ul>
<hr>
<h3 id="·-externalservicego"><a href="#%C2%B7-externalservicego" aria-hidden="true"><span class="icon icon-link"></span></a>· ExternalService.go</h3>
<ul>
<li>외부 Service의 command와 res/req 방식으로 통신하는 logic이 구현되어 있는 ExternalService code 만들기 </li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> RelationCommandInfo
fileName<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>commandValue<span class="token punctuation">.</span>aggregate<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>Service<span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span>external
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> external 

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"github.com/go-resty/resty/v2"</span>
	<span class="token string">"strconv"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> client <span class="token operator">=</span> resty<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span>#MethodPost commandValue<span class="token punctuation">.</span>restRepositoryInfo<span class="token punctuation">.</span>method<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>commandValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span>entity <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">*</span>resty<span class="token punctuation">.</span>Response<span class="token punctuation">{</span>
	resp<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">R</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token function">SetBody</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token function">Post</span><span class="token punctuation">(</span><span class="token string">"https://{{commandValue.boundedContext.name}}:8080/{{commandValue.aggregate.namePlural}}"</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> resp
<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>MethodPost<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>#MethodGet commandValue<span class="token punctuation">.</span>restRepositoryInfo<span class="token punctuation">.</span>method<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>commandValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span>id <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span>resty<span class="token punctuation">.</span>Response<span class="token punctuation">{</span>
	target <span class="token operator">:=</span> <span class="token string">"https://{{commandValue.boundedContext.name}}:8080/{{commandValue.aggregate.namePlural}}/"</span><span class="token operator">+</span>strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>

	resp<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">R</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token function">Get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>

	<span class="token keyword">return</span> resp
<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>MethodGet<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>#MethodUpdate commandValue<span class="token punctuation">.</span>restRepositoryInfo<span class="token punctuation">.</span>method<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>commandValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span>entity <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">*</span>resty<span class="token punctuation">.</span>Response<span class="token punctuation">{</span>
	resp<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">R</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token function">SetBody</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token function">Put</span><span class="token punctuation">(</span><span class="token string">"https://{{commandValue.boundedContext.name}}:8080/{{commandValue.aggregate.namePlural}}"</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> resp
<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>MethodUpdate<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>#MethodDelete commandValue<span class="token punctuation">.</span>restRepositoryInfo<span class="token punctuation">.</span>method<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>commandValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span>id <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span>resty<span class="token punctuation">.</span>Response<span class="token punctuation">{</span>
	target <span class="token operator">:=</span> <span class="token string">"https://{{commandValue.boundedContext.name}}:8080/{{commandValue.aggregate.namePlural}}/"</span><span class="token operator">+</span>strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>

	resp<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">R</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token function">Delete</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>

	<span class="token keyword">return</span> resp
<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>MethodDelete<span class="token punctuation">}</span><span class="token punctuation">}</span>


<span class="token operator">&lt;</span>function<span class="token operator">></span>
	window<span class="token punctuation">.</span>$HandleBars<span class="token punctuation">.</span><span class="token function">registerHelper</span><span class="token punctuation">(</span><span class="token string">'MethodGet'</span><span class="token punctuation">,</span> <span class="token function">function</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	window<span class="token punctuation">.</span>$HandleBars<span class="token punctuation">.</span><span class="token function">registerHelper</span><span class="token punctuation">(</span><span class="token string">'MethodPost'</span><span class="token punctuation">,</span> <span class="token function">function</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	window<span class="token punctuation">.</span>$HandleBars<span class="token punctuation">.</span><span class="token function">registerHelper</span><span class="token punctuation">(</span><span class="token string">'MethodUpdate'</span><span class="token punctuation">,</span> <span class="token function">function</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'PUT'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	window<span class="token punctuation">.</span>$HandleBars<span class="token punctuation">.</span><span class="token function">registerHelper</span><span class="token punctuation">(</span><span class="token string">'MethodDelete'</span><span class="token punctuation">,</span> <span class="token function">function</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'DELETE'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>function<span class="token operator">></span></code></pre>
<h4> HandleBar Function </h4>
<p>Method에 따라 method에 맞는 코드를 generate 해야 하기 때문에 method들을 구분할 수 있는 switch/case 와 같은 함수를 구현.</p>
<ul>
<li>MethodGet </li>
</ul>
<p>Get method 일때 return true </p>
<ul>
<li>MethodPost</li>
</ul>
<p>Post method 일때 return true</p>
<ul>
<li>MethodUpdate </li>
</ul>
<p>Update method 일때 return true</p>
<ul>
<li>MethodDelete</li>
</ul>
<p>Delete method 일때 return true </p>
<h4> 세부사항 </h4>
<ul>
<li>package는 external로 현재와 다른 package로 정의한다. </li>
<li>파일의 이름은 res/req 통신으로 연결된 외부 service의 Aggregate명 + service 로 한다. </li>
<li>연결된 command들의 정보는 commandValue 객체 안에 있다. </li>
<li>해당 command의 method는 commandValue.restRepositoryInfo.method에 있다. </li>
<li>Spring boot code에서는 Feign client를 사용하여 res/req 통신을 수행하는데 Go 에서는 Feign 관련 api가 존재하지 않아 resty library를 사용하여 res/req 형식의 통신을 구현하였다. </li>
</ul>
<hr>
<h3 id="·-externalentitygo"><a href="#%C2%B7-externalentitygo" aria-hidden="true"><span class="icon icon-link"></span></a>· ExternalEntity.go</h3>
<ul>
<li>res/req 통신으로 연결된 외부 service의 Aggregate에 해당하는 Entity code 만들기</li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> RelationCommandInfo
fileName<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>commandValue<span class="token punctuation">.</span>aggregate<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span>external
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> external

<span class="token punctuation">{</span><span class="token punctuation">{</span>#commandValue<span class="token punctuation">.</span>aggregate<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#aggregateRoot<span class="token punctuation">.</span>fieldDescriptors<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span>#isKey<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token builtin">int</span> <span class="token string">`gorm:"primaryKey" json:"id" type:"int"`</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>isKey<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">^</span>isKey<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>#typeCheck className<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>typeCheck<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token string">`json:"{{nameCamelCase}}" type:"{{#typeCheck className}}{{/typeCheck}}"`</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>isKey<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>aggregateRoot<span class="token punctuation">.</span>fieldDescriptors<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>commandValue<span class="token punctuation">.</span>aggregate<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token operator">&lt;</span>function<span class="token operator">></span>
    window<span class="token punctuation">.</span>$HandleBars<span class="token punctuation">.</span><span class="token function">registerHelper</span><span class="token punctuation">(</span><span class="token string">'typeCheck'</span><span class="token punctuation">,</span> function <span class="token punctuation">(</span>className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"String"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">"string"</span>
        <span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"Integer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"int"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"Float"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"float64"</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"Long"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token string">"int"</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>function<span class="token operator">></span></code></pre>
<h4> 세부사항 </h4>
<ul>
<li>package는 external로 현재와 다른 package로 정의한다. </li>
<li>연결된 command 정보를 갖고 있는 commandValue 객체 안 aggregate들의 정보를 가져와 Entity.go 파일과 동일한 방식으로 생성한다. </li>
</ul>
<hr>
<h3 id="·-repositorygo"><a href="#%C2%B7-repositorygo" aria-hidden="true"><span class="icon icon-link"></span></a>· Repository.go</h3>
<ul>
<li>REST API의 기본적인 CRUD 만들기 </li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> Aggregate
fileName<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>Repository<span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"net/http"</span>
	<span class="token string">"strconv"</span>
	<span class="token string">"github.com/labstack/echo"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span>c echo<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	repository <span class="token operator">:=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">Repository</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	entities <span class="token operator">:=</span> repository<span class="token punctuation">.</span><span class="token function">GetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> entities<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token function">GetbyId</span><span class="token punctuation">(</span>c echo<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token punctuation">{</span>
	repository <span class="token operator">:=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">Repository</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	id<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	self <span class="token operator">=</span> repository<span class="token punctuation">.</span><span class="token function">GetID</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>

	<span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> self<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token function">Persist</span><span class="token punctuation">(</span>c echo<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token punctuation">{</span>
	repository <span class="token operator">:=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">Repository</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	params <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
	
	c<span class="token punctuation">.</span><span class="token function">Bind</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>params<span class="token punctuation">)</span>
	<span class="token function">ObjectMapping</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> params<span class="token punctuation">)</span>
	
	
	repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span>

	<span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> self<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token function">Put</span><span class="token punctuation">(</span>c echo<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token punctuation">{</span>
	repository <span class="token operator">:=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">Repository</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	id<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	params <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
	
	c<span class="token punctuation">.</span><span class="token function">Bind</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>params<span class="token punctuation">)</span>

	err <span class="token operator">:=</span> repository<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> params<span class="token punctuation">)</span>

	<span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token function">Remove</span><span class="token punctuation">(</span>c echo<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token punctuation">{</span>
	repository <span class="token operator">:=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">Repository</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	id<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	self <span class="token operator">=</span> repository<span class="token punctuation">.</span><span class="token function">GetID</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>

	err <span class="token operator">:=</span> repository<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span>

	<span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<h4> 세부사항 </h4>
<ul>
<li>Entity 당 하나의 CRUD를 생성 해주어야 해서 Aggregate 당 하나의 Repository.go를 만든다. </li>
<li>Spring boot에는 spring-data-rest package의 기능을 go에서는 echo framework을 이용하여 구현하였다. </li>
</ul>
<hr>
<h3 id="·-routego"><a href="#%C2%B7-routego" aria-hidden="true"><span class="icon icon-link"></span></a>· Route.go</h3>
<ul>
<li>Controller에 해당하는 Route code 만들기 </li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> BoundedContext
fileName<span class="token punctuation">:</span> Route<span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"github.com/labstack/echo"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">RouteInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>echo<span class="token punctuation">.</span>Echo <span class="token punctuation">{</span>
	e <span class="token operator">:=</span> echo<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#aggregates<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">:=</span> <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	e<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/{{namePlural}}"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span>Get<span class="token punctuation">)</span>
	e<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/{{namePlural}}/:id"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span>GetbyId<span class="token punctuation">)</span>
	e<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">"/{{namePlural}}"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span>Persist<span class="token punctuation">)</span>
	e<span class="token punctuation">.</span><span class="token function">PUT</span><span class="token punctuation">(</span><span class="token string">"/{{namePlural}}/:id"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span>Put<span class="token punctuation">)</span>
	e<span class="token punctuation">.</span><span class="token function">DELETE</span><span class="token punctuation">(</span><span class="token string">"/{{namePlural}}/:id"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span>Remove<span class="token punctuation">)</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>aggregates<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token keyword">return</span> e
<span class="token punctuation">}</span></code></pre>
<h4> 세부사항 </h4>
<ul>
<li>기본적인 CRUD에 해당하는 함수들의 경로를 지정해 준다. </li>
<li>Entity에 해당하는 Aggregate 별로 CRUD가 있어야 하므로 각 Aggregate 마다 CRUD를 생성. </li>
<li>Spring boot code에선 Rest controller가 수행하는 작업을 Go 에선 echo framework 위에 routing 설정을 하여 구현하였다. </li>
</ul>
<hr>
<h3 id="·-maingo"><a href="#%C2%B7-maingo" aria-hidden="true"><span class="icon icon-link"></span></a>· main.go</h3>
<ul>
<li>Application을 실행하는 main code 만들기 </li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> BoundedContext
fileName<span class="token punctuation">:</span> main<span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span><span class="token punctuation">(</span>
	<span class="token string">"{{name}}/{{name}}"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#aggregates<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">DBInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>aggregates<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">InitProducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>#policyExists policies<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">InitConsumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>policyExists<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">^</span>policyExists policies<span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>policyExists<span class="token punctuation">}</span><span class="token punctuation">}</span>
	e <span class="token operator">:=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">RouteInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	e<span class="token punctuation">.</span>Logger<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token string">":{{portGenerated}}"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>function<span class="token operator">></span>
	window<span class="token punctuation">.</span>$HandleBars<span class="token punctuation">.</span><span class="token function">registerHelper</span><span class="token punctuation">(</span><span class="token string">'policyExists'</span><span class="token punctuation">,</span> function <span class="token punctuation">(</span>policies<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>policies<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> options<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
		
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>function<span class="token operator">></span></code></pre>
<h4> HandleBar Function </h4>
<ul>
<li>policyExists</li>
</ul>
<p>pub/sub 통신 방법이 존재하면 즉, 외부 service에 해당 event에 대한 policyHandler가 존재하는지 검사하기 위한 함수 </p>
<h4> 상세설명 </h4>
<ul>
<li>Application이 실행 되면서 DB, kafkaProducer, 필요하다면 Kafkaconsumer와 echo framework을 시작시킨다. </li>
</ul>
<h2 id="go-전용-template"><a href="#go-%EC%A0%84%EC%9A%A9-template" aria-hidden="true"><span class="icon icon-link"></span></a>Go 전용 Template</h2>
<ul>
<li>Go에서는 spring boot과 다르게 지원되지 않는 api들이 많다.</li>
<li>이를 위해 필수적인 요소들만 model에 맞는 함수들을 generate 시킨다. </li>
</ul>
<h3 id="·-dbgo"><a href="#%C2%B7-dbgo" aria-hidden="true"><span class="icon icon-link"></span></a>· DB.go</h3>
<ul>
<li>Sqlite DB 만들기 (spring boot tutorial에선 h2 DB를 쓴다.)</li>
<li>DB와 연관된 모든 logic은 이 코드에서 수행 된다. </li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> Aggregate
fileName<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>DB<span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>boundedContext<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token boolean">_</span> <span class="token string">"github.com/jinzhu/gorm/dialects/mysql"</span>
	<span class="token string">"gorm.io/driver/sqlite"</span>
	<span class="token string">"gorm.io/gorm"</span>
	<span class="token string">"log"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> err <span class="token builtin">error</span>

<span class="token keyword">type</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>DB <span class="token keyword">struct</span><span class="token punctuation">{</span>
	db <span class="token operator">*</span>gorm<span class="token punctuation">.</span>DB
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span>repository <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>DB

<span class="token keyword">func</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">DBInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span>repository <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>DB<span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span>repository<span class="token punctuation">.</span>db<span class="token punctuation">,</span> err <span class="token operator">=</span> gorm<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>sqlite<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"{{namePascalCase}}_table.db"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>gorm<span class="token punctuation">.</span>Config<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">"DB Connection Error"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span>repository<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">AutoMigrate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">Repository</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>DB <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>nameCamelCase<span class="token punctuation">}</span><span class="token punctuation">}</span>repository
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>DB<span class="token punctuation">)</span><span class="token function">save</span><span class="token punctuation">(</span>entity <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	err <span class="token operator">:=</span> self<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>DB<span class="token punctuation">)</span><span class="token function">GetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
	entities <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	self<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>entities<span class="token punctuation">)</span>

	<span class="token keyword">return</span> entities
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>DB<span class="token punctuation">)</span><span class="token function">GetID</span><span class="token punctuation">(</span>id <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
	entity <span class="token operator">:=</span> <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	self<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">"id = ?"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>

	<span class="token keyword">return</span> entity
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>DB<span class="token punctuation">)</span> <span class="token function">Delete</span><span class="token punctuation">(</span>entity <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token punctuation">{</span>
	err2 <span class="token operator">:=</span> self<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>entity<span class="token punctuation">)</span><span class="token punctuation">.</span>Error
	<span class="token keyword">return</span> err2
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>self <span class="token operator">*</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span>DB<span class="token punctuation">)</span> <span class="token function">Update</span><span class="token punctuation">(</span>id <span class="token builtin">int</span><span class="token punctuation">,</span> params <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token punctuation">{</span>
	entity <span class="token operator">:=</span> <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	err1 <span class="token operator">:=</span> self<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">"id = ?"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">.</span>Error
	<span class="token keyword">if</span> err1 <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err1
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
		update <span class="token operator">:=</span> <span class="token operator">&amp;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
		<span class="token function">ObjectMapping</span><span class="token punctuation">(</span>update<span class="token punctuation">,</span> params<span class="token punctuation">)</span>

		err2 <span class="token operator">:=</span> self<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">Model</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>entity<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Updates</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">.</span>Error
		<span class="token keyword">return</span> err2
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
<h4> 세부 사항 </h4>
<ul>
<li>하나의 boundedContext에 두개 이상의 aggregate이 존재하기 때문에 하나의 Aggregate 당 하나의 DB.go 파일을 만든다. </li>
<li>또한 aggregate이 두개 이상 일땐 생성되어야 하는 db table이 두개 이상 이기 때문에 이를 구분하기 위해 struct method 방식으로 구현한다. </li>
</ul>
<hr>
<h3 id="·-kafkaprocessorgo"><a href="#%C2%B7-kafkaprocessorgo" aria-hidden="true"><span class="icon icon-link"></span></a>· KafkaProcessor.go</h3>
<ul>
<li>Kafka와 관련된 logic들을 위한 code 만들기 </li>
<li>Kafka producer와 consumer에 대한 설정은 현 파일에서 설정해준다. </li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> BoundedContext
fileName<span class="token punctuation">:</span> KafkaProcessor<span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"gopkg.in/confluentinc/confluent-kafka-go.v1/kafka"</span>
	<span class="token string">"fmt"</span>
    <span class="token string">"encoding/json"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> producer <span class="token operator">*</span>kafka<span class="token punctuation">.</span>Producer
<span class="token keyword">var</span> consumer <span class="token operator">*</span>kafka<span class="token punctuation">.</span>Consumer
<span class="token keyword">var</span> topic <span class="token builtin">string</span>

<span class="token keyword">func</span> <span class="token function">InitProducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    producer<span class="token punctuation">,</span> err <span class="token operator">=</span> kafka<span class="token punctuation">.</span><span class="token function">NewProducer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>kafka<span class="token punctuation">.</span>ConfigMap<span class="token punctuation">{</span><span class="token string">"bootstrap.servers"</span><span class="token punctuation">:</span> <span class="token string">"localhost"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
	topic <span class="token operator">=</span> <span class="token string">"{{options.package}}"</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">InitConsumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    consumer<span class="token punctuation">,</span> err <span class="token operator">=</span> kafka<span class="token punctuation">.</span><span class="token function">NewConsumer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>kafka<span class="token punctuation">.</span>ConfigMap<span class="token punctuation">{</span>
        <span class="token string">"bootstrap.servers"</span><span class="token punctuation">:</span> <span class="token string">"localhost"</span><span class="token punctuation">,</span>
        <span class="token string">"group.id"</span><span class="token punctuation">:</span>          <span class="token string">"{{name}}"</span><span class="token punctuation">,</span>
        <span class="token string">"auto.offset.reset"</span><span class="token punctuation">:</span> <span class="token string">"earliest"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">go</span> <span class="token function">KafkaConsumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">KafkaProducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>kafka<span class="token punctuation">.</span>Producer<span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	
	<span class="token keyword">return</span> producer<span class="token punctuation">,</span> topic
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">KafkaConsumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    
	
    consumer<span class="token punctuation">.</span><span class="token function">SubscribeTopics</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>topic<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
    <span class="token comment">//defer c.Close()</span>
	<span class="token keyword">var</span> dat <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">,</span> err <span class="token operator">:=</span> consumer<span class="token punctuation">.</span><span class="token function">ReadMessage</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>Value<span class="token punctuation">,</span> <span class="token operator">&amp;</span>dat<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
            <span class="token punctuation">{</span><span class="token punctuation">{</span>#policies<span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token keyword">if</span> dat<span class="token punctuation">[</span><span class="token string">'eventType'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>#relationEventInfo<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token string">"{{eventValue.namePascalCase}}"</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>relationEventInfo<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
                <span class="token punctuation">{</span><span class="token punctuation">{</span>#relationEventInfo<span class="token punctuation">}</span><span class="token punctuation">}</span>
                whenever<span class="token punctuation">{</span><span class="token punctuation">{</span>eventValue<span class="token punctuation">.</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token boolean">_</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>namePascalCase<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span>dat<span class="token punctuation">)</span>
                <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>relationEventInfo<span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>policies<span class="token punctuation">}</span><span class="token punctuation">}</span>
			
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// The client will automatically try to recover from all errors.</span>
            fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Consumer error: %v (%v)\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">,</span> msg<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Streamhandler</span><span class="token punctuation">(</span>message <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	producer<span class="token punctuation">,</span> topic <span class="token operator">:=</span> <span class="token function">KafkaProducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	
	producer<span class="token punctuation">.</span><span class="token function">Produce</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>kafka<span class="token punctuation">.</span>Message<span class="token punctuation">{</span>
		TopicPartition<span class="token punctuation">:</span> kafka<span class="token punctuation">.</span>TopicPartition<span class="token punctuation">{</span>Topic<span class="token punctuation">:</span> <span class="token operator">&amp;</span>topic<span class="token punctuation">,</span> Partition<span class="token punctuation">:</span> kafka<span class="token punctuation">.</span>PartitionAny<span class="token punctuation">}</span><span class="token punctuation">,</span>
		Value<span class="token punctuation">:</span>          <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span></code></pre>
<h4> 세부사항 </h4>
<ul>
<li>group id는 boundedContext의 이름으로 한다. </li>
<li>topic은 project의 이름으로 한다. </li>
<li>KafkaConsumer에서 kafka channel을 통해 들어온 message를 deserialize 하여 eventType에 따라 해당되는 logic이 수행되는 policyHandler 함수를 call 한다. </li>
</ul>
<hr>
<h3 id="·-utilgo"><a href="#%C2%B7-utilgo" aria-hidden="true"><span class="icon icon-link"></span></a>· Util.go</h3>
<ul>
<li>Spring boot엔 있지만 Go엔 없는 API들 중 필수적인 기능들을 구현해 놓은 code이다. 이는 model driven하게 code가 generate 되진 않지만 각 boundedContext당 하나의 Util.go 파일이 생성된다. </li>
</ul>
<pre class="language-go"><code class="language-go">forEach<span class="token punctuation">:</span> BoundedContext
fileName<span class="token punctuation">:</span> util<span class="token punctuation">.</span><span class="token keyword">go</span>
path<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">package</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"reflect"</span>
	<span class="token string">"strconv"</span>
    <span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">ObjectMapping</span><span class="token punctuation">(</span>anything <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> request <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    target <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>anything<span class="token punctuation">)</span>
    elements <span class="token operator">:=</span> target<span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> elements<span class="token punctuation">.</span><span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token comment">//mValue := elements.Field(i)</span>
        mType <span class="token operator">:=</span> elements<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        tag <span class="token operator">:=</span> mType<span class="token punctuation">.</span>Tag
        structFieldValue <span class="token operator">:=</span> elements<span class="token punctuation">.</span><span class="token function">FieldByName</span><span class="token punctuation">(</span>mType<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
		tagName <span class="token operator">:=</span> tag<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">"json"</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> tag<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"int"</span><span class="token punctuation">{</span>
            temp<span class="token punctuation">,</span><span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>request<span class="token punctuation">[</span>tagName<span class="token punctuation">]</span><span class="token punctuation">)</span>
            val <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span>
        	structFieldValue<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> tag<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"string"</span><span class="token punctuation">{</span>
            val <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>request<span class="token punctuation">[</span>tagName<span class="token punctuation">]</span><span class="token punctuation">)</span>
            structFieldValue<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ELSE IN OBJECTMAPPING"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">getType</span><span class="token punctuation">(</span>myvar <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> t <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>myvar<span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> reflect<span class="token punctuation">.</span>Ptr <span class="token punctuation">{</span>
        <span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> t<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ToJson</span><span class="token punctuation">(</span>event <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	e<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		<span class="token keyword">return</span> <span class="token string">"ToJson error"</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token function">string</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Publish</span><span class="token punctuation">(</span>event <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	message <span class="token operator">:=</span> <span class="token function">ToJson</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>

	<span class="token function">streamhandler</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<h4> 세부사항 </h4>
<ul>
<li>ObjectMapping 함수는 echo framework을 통해 들어온 request 타입인 map[string] string을 Entity class와 mapping 해주는 함수이다. 일반적으로 objectMapping은 mapstructure를 사용하지만 이는 map[string] interface에 관한 타입만 지원 하여 구현되었다. </li>
<li>Publish, ToJson, getType 함수는 Spring boot code에선 AbstractEvent의 method로 구현되었지만 Go에선 상속이 불가하여 따로 함수 형태로 구현되었다. </li>
</ul>
</div><div class="mt-8 pt-8 lg:mt-12 lg:pt-12 border-t border-ui-border"><div><div class="flex flex-col sm:flex-row justify-between items-center"><!----><!----></div></div></div></div></div></div></main></div><!----></div>
    <script src="/assets/js/app.e3e72f7a.js" defer></script><script src="/assets/js/page--src--templates--markdown-page-vue.e6b76cf2.js" defer></script>
  </body>
</html>
