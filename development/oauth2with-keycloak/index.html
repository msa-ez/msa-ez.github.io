<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>JWT Token-based Authentication and Authorization - msaez</title><meta name="gridsome:hash" content="0960ee8640743127d8f292e6058a2090e26cbc82"><meta data-vue-meta="ssr" charset="utf-8"><meta data-vue-meta="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-meta="ssr" key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-meta="ssr" key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/templates-language/springboot-java-template/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/si-gpt/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/templates-language/python-template/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/on-prem-inst/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/operation/ops-deploy-diagramming-advanced-hpa/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/operation/ops-deploy-diagramming-advanced-ingress/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/operation/ops-deploy-diagramming-advanced-istio/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/operation/ops-deploy-diagramming-advanced-pvc/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/operation/ops-deploy-diagramming-basic-objects/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/model-driven/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/marketplace/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/k8s-modeling/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/started/key-features/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/infrastructure-modeling/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/templates-language/go-template/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/google-drive-examples/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/template-editor-custom-template/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/event-storming-tool/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/unit-test/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/started/event-storming-learning/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/template-editor/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/template-structure/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/cloud-ide-tool/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/development-practice/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/custom-template/tutorial/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/started/domain-driven/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/chat-gpt/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/example-scenario/online-lecture/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/tool/attending-lectures/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/pub-sub/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/contact/question/"><meta data-vue-meta="ssr" key="og:url" name="og:url" content="undefined/development/oauth2with-keycloak/"><meta data-vue-meta="ssr" name="description" content="undefined"><meta data-vue-meta="ssr" key="og:title" name="og:title" content="JWT Token-based Authentication and Authorization"><meta data-vue-meta="ssr" key="twitter:title" name="twitter:title" content="JWT Token-based Authentication and Authorization"><meta data-vue-meta="ssr" key="og:description" name="og:description" content="undefined"><meta data-vue-meta="ssr" key="twitter:description" name="twitter:description" content="undefined"><meta data-vue-meta="ssr" key="og:type" name="og:type" content="website"><meta data-vue-meta="ssr" key="twitter:card" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" key="og:image" name="og:image" content="undefined/logo.jpg"><meta data-vue-meta="ssr" key="twitter:image" name="twitter:image" content="undefined/logo.jpg"><link data-vue-meta="ssr" rel="icon" href="data:,"><link data-vue-meta="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.2921b393c59c1de81f95c629be62cea9.png"><link data-vue-meta="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.2921b393c59c1de81f95c629be62cea9.png"><link data-vue-meta="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.2921b393c59c1de81f95c629be62cea9.png"><link data-vue-meta="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.2921b393c59c1de81f95c629be62cea9.png"><link data-vue-meta="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.2921b393c59c1de81f95c629be62cea9.png"><link rel="preload" href="/assets/css/0.styles.90fa1cc0.css" as="style"><link rel="preload" href="/assets/js/app.eec89431.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--markdown-page-vue.e74886a9.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.a46f0981.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.b39d4046.js"><link rel="prefetch" href="/assets/js/search.bb9c60d3.js"><link rel="stylesheet" href="/assets/css/0.styles.90fa1cc0.css"><noscript data-vue-meta="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="antialiased text-ui-typo bg-ui-background"><div class="flex flex-col justify-start min-h-screen"><header class="sticky top-0 z-10 w-full border-b bg-ui-background border-ui-border"><div class="py-2 border-t-2 border-ui-primary"><div class="container"><div class="flex items-center justify-between -mx-2 sm:-mx-4 is-not-mobile"><div><a href="/" title="Home" class="flex items-center text-ui-primary active"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 120 64' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-37afcb0017f229c304bfe602273e7d7c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-37afcb0017f229c304bfe602273e7d7c)' width='120' height='64' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAYAAADvVd%2bPAAAACXBIWXMAAC4jAAAuIwF4pT92AAATu0lEQVRo3sVZB3RU15lWIxhscMtunHhd8EkcJzFusb1xwMaAuoQkpFEFUWQwzXEMAQSYElFEkVCbGUmjikZdIJBAqIxmRgUJVRAqmGLABQdwTBDqZebdb/97Z0YIO1nvnrN7mHO%2b89/35pX5vvu3e8fKij69eQ4C48ffg7UZNgK5DrY9ufZ2wtJ5qwfw0cirrDSKahuCrRk0rrKuUFRb05h/Z1VhukZcP378g09vnr2VmZwtR4/Z8nNE9Ed/DAlhRfdM%2bS7X/QXkv/rWtrQ6R2cVW%2bSVNBDkoRoK9EwaCvBMGvQn60fwJcgIPnRuvkfSkBeNPWns4aEadCfrRseudN5lvmrAZU6SZJ%2bobA/Ry3XLyhXV7xPBXxGRh/%2b731PxQ3FsK%2bTi2Fojrx4TQtievP8BQSJHBJ8h%2bzrBje5ZQTaMhEulcTmN2%2bn7G925zgNS/n9K0enF3S5qwC8T8LFAfT9kZojjDMDbgkP34ENwIySnXkNraiN0CfUgAQbph39DaCQyeWT3EuHlhDk0/hXZx36MDxdovOUEnyC8SiQcyS4mbOnNtY8nW0K2lfAFobc/3wGGo05AsTNwwpXgBlbsIs4NHXZEb74zjPnvQJ2ROmKvgmF%2bUr%2bBZpQwZKDZFdaLjt0T%2bgyO8l6jo7zP6KzoNXok9hvpvJG8xUjXE8iqBgXck4alQ8ozxiq5zkAeIFUqa6BPqENNUiPqU1twOu0M6lKaUa06DRJghEhdJ9tMOMzFISwjOBB%2bTZh6T4Tq%2b1w4khU5Y6DAETjuQsRcTJbIGY%2b5YOiIM/oLnECCMAoJqTfP0XA3Z67hTsYfCTMMPbkORvpO6s51Yoa8P7JydTgcVWBeSf2MCDEiT3aI7ACzVwyyoBywtSVg60%2bCfXQcbH46mKNigK7n1wyJe4g8m0fH3nTPYUUj08n1jGafaUyQiKiRrIGsoeSgxngiUiOVx%2bpRlViPWhKHi3I6tZVEahXnuDiEvxHOE%2baYQ8DGIsBfOGma5REiQoTsDdxyknfVfzT2Z8%2bQutUzGHkI4yLczX6fjRx1ZWjczFC3FgN5c0iYuexunhNG8mayM1l/Zm4qIycCQSZpCB6JA5iXNIq4GiNi0ouxdsNWfLx2Azbt2IeUomZsLQOclIMgTwCJABIANPsIVPWgRFGLSnkVd39OBERaCFEep4dGXsM6T1xkFzRXWP2hFlYarZPoOyMXhgtEiZFbqVJRA62yFo3pbXR/tbNZAFshAM2gB3djImck8pwkiDyjmWcjDXvw93oFjLXr0Zv9Pj%2bPkWIvdGiS4ecfiDVr/oRvT8WiP3c2unMd2WDeLFzNCWZ%2bSXfZPNUwF0CQcoofRkLNABb6eYJeeR9%2bYm2FvZFyfFQEOCv76XqTAK5JI1iWeJtIVnHS4wWgcRU0cdVo03ZgzUdr4ObuhqK8YjTlnEVptNbiKXQvt0IwSdwrckjVS9/zAPtX%2b4h0r2WGcx2I0CzcOhUHV68ATHniKWzf8VdIdZvxj5RXITXtwRyne0T2hG0FqpbhH%2br30Jdnj9u57vgg%2bSu4qIxEZgDOij6sJnI790aZ77HGc88/D4c5s/DitKfFueAAH%2bypAubG9QnBvEgAZ/KYtYk3QBVAkK8wk9coq3EiogIXyj/Hnz7%2b09jvePq5X%2bBM5TlUxJgEEteaReMC8NxB9ibhSbMA1pYk%2bBTh9iDlAB7Ld7LeB8p9kZW4995M2U5GV2UyjHnv4FZNFJ5%2b/sWx75xc3IGG7ejOeAc9FAaDebOxPvUcnFQM3skDsCdSYVrAV%2bYtrqe3Iv%2b4Hse%2bBGLKbmK3IhcJFX%2bDd6oB81Q8bIaEAE4kwLaEL1Aj16LcLAAnw12/WtUA/YkqTJg4QQg6wW6CePaRjKOoS21GWaxuPHnuAcYauodE6Rgrg5ZEaK77nZYwuJNJAlQEID0uTDx00kMThd26eQNQvxJtxfsxYfLj45R/EX%2bvjUZ/9kx05zljNG8mDqSVw0FF5SypHw7yPoRSjK9eY5otG1tbTJ/%2bCjaHxyO%2b/BtENwMOCRLcE/oFeUqaYx5wIP7iPQHGzf4l3VX4%2bvmanmdjAzs7O7M3huNsQSdORlWOCVAhNwlwKrmJH580l0BrSx9gY06EpbwSmAVgqAhEauxO8VA7O1thX3jpFaArGcXJ2%2bnYZlwc/wS1R6IgFbngdraj8JJDhw5hLglApVAkQK9UBrXmMn75H0/cF///9thD%2bGjVCiTV9sFNNUKxPyBEsOQAaoJQZRaAk%2bEzW5/WguL847CyNj3DP8Afb775phgHBgbifNlllERqxvKFWQgDrwpklUIARZWtEIB3fOYwUPLSx7P/ncxZgCYIqqi/iodOmGAnwMe1ZflIVR4Q45df/h0ef/wxMY4O/xTQLsJ3mbNFL1Cq3sdLIcWzKam5xvcjOJshobgD/rL5eOZnj90nxKrlS7GbwsRe3i9yABeAyiCylS0iB5TLq8Xsl0RocKn6Khwc7cV9EydOxMWOi/Dy9BLHr73xKs5VdKIsalwIiKpRZeA9Ax1vMMe/ncUDzALYrxWl0CQAQ%2bVCKCO2i4c%2b9dTP4OnhIcZLQ5ZhY2ioGIeGbsK7774rxgEBgZQHNuN2xkyM5L%2bHlqy1cFeNjlUB14RBEgDYcwpQtALyir9jx/54/PQJUyg9%2begkJJR9SbNOiVM1IMjLVP04qjgNrVwv4v9kdCWas9qQmZo1JpyrmytGuw1YtWKVOJ7y6BToi2qgU9bR7OvHl00j7w/oOf7fL4G25hDwko5ZQoALEIy4/dtMbvrTJ3HsWLGItUcfnYpp06aJ88XHCvHh8uVi/NL036O7LhI9WTOpL5iNKzmLIEvqhQfVcj77Kw8DyowiBPnLsDu%2bENHlt1F%2b5hZeefm34v5HH54A5YmLmJfCSIB%2bCodhLErsRin1ABpz7Jce1OJCzWW88ebrYwLYUfKbNu15PPPsM2PnUpSpaFJTOYzRmgQwlUGmja/lx3%2bwlECzBzjYmEPgDXMZxJ3M9xh35%2bjwreKBDz00Cd9c6YCri5M56ViLHHCp/ggU%2b03XTJryBGs7GQdDoT3rz7dnd3Jd2AfJX1MzY2C8tMnrgHffnm66n/D8009i6iOTxn60y5wZiKk2Yq58kHknk8ckG9kq1W1mnn1WElXJ2g6fR1yU3PQMaxtMpOQ8cfLEsWfY2ppy1bpP1qG96AKoQxyrAryF1pjWEc9YSqBoh3vNy1kS4t8pHLoHqKcnASRol7DI3Z9ayOFWSzYKUvaPvWzi1J%2bhpzUJukyRKBlHbPgmSOXB0lfy6axAsYknM9ENcg9YXgCosk7gtd88B7txsT/RlsjPnQl15efwPcTYvERqiVW8ctyR1sZclKoVep4AWUVsFdprOjHtxWlj9xYVFAt3z07JwY6tOzB58mRTWXZ2wnmNSIRi5ikEJF0CD4mqL%2bj4ke/3AJZ22I7GF0YKnXFH/a4E/VIWtuUT88sm4sLJfRhqjMCiZWvw%2b7dnQBF7EJJ%2bNb6sjMD7rv7s3VmzkZGWIn2e4YfCXZ6QJXZL85JHqAz2Md4LuJAIHx6h2NcPIiK7CfsT8nFAVYD4oy2IqzVAdshIOWOAucXdwtwdTdI721vx6f561MRXSWWiqalmLaVtKMopRtS%2baCTGJ6L95GfQxp0S/f71MzcoDF8Sv3fq41PRUNLMKuNqxMxTCzzK1wZE%2bizn2nTo3L29Ab7eH/OCXIdyvrojDzCgcjGRjMKvf/caZEEhuF4bj%2bH8WaIbNDbuAXTL0JM5A/0ngjHaEoEbpaHSxewQtOz%2bzTerFU2pjqnU28cbpbnxYPbxIHIGeCTcxaK0r7D%2byDdYkAsEZQGeKcCcGAluSgN5DHWCu65Is7e04q3QlvbMyLq6hsRGEBGpMo5qeUw1TiU3oyW7HWfyO6gk6kWio4UQTqkboSmqRPS%2bGGzaFMpOVzSxshgdjkeVGYoiS8V1ZHdxnof3FtmMXwqLRsg8TuCVQCyG8p1Yb00Yhhv2AY3bMXDMB3ezqd9Xz8DdjD9wkajrcyQRZqEn/Q%2bs/q/TUfHpa7i2Y/J7ATmG5esKv8POww2G5JJjrESbgDP12/F162o20uWDr5rWMO%2b0a8yn8DjzP6JBwJEa5lvQAN%2b8s8w9vgLOUSfhrM5aWnjo%2bMky9SkUJdJqL0HLSuN1KJPrGFUDgXEZHnwlSJ0ea8lpZ53FF3E0%2bgSTr08YTd2WAcWGxMHotfLFltnftTL8BxsetuY8sMHSC4hFURatANXvsDu8xc2ZLdYJRJrgxFeGUm%2bBg9RX7MJ6S93ZdfKcm1r324aLvvqecwu6Bzr8YOhwZaxjDkPnbOAzdxjPe8Jw3oN1t4Vg5dFTWFC9E0uqd7HF1buwuHo3FmjD2ELdHgTrw43Bur1scdVBLNVFsg%2b0B7FCE81Wl8fiz6UKdlRVYdDKawyU3fmqT7q3OtQxnvmPR5Qb4zcmSenbMxEfmtSYuDnlRc6vOaPdOnz1/vs3Q3pMe34WD5hvpFJI5EfFyjDPicPA1/9mUfi6H/0FDhjimyM6dwx/JmPD52Ug4ky67A9c8QEuuAGfyxi%2bDgFuUvt8YyOGaeYHO2VsiOxohz/bUZrd76eNYot1kQjWRrIg3QGsaVVhdUsiW96oQMjpWCyoiWB%2bleEkyAG2UH8AgVX72BJ9JDTqOjSmnEVtciP0CfWoVIryxpOdQRd/auRY5EmoNqciYVNypGWSlRtVdiSGZXzfbpDYD7SUwkGqAhyjtC7grTHfFLFskBiPibUCx0BPtv3XfSddLnHyQ50%2bBBkG2z0Zu7bG2H01RTpTk4Dighi2J2wD2xW2DX1XDmCkcx4b6PQDzntJmQ1/OS/TRklLiViQbj%2bLbi6APCuZRWUmQHE4nSmLM5i6rpjtbctDYCV5gz6SPCUSIdqDdwuTyg9o42oyyANqiTjP7AN8rc/zQ2P6WaRtU9%2bKWadws5An4rYW4hYRvh8C1mb7C8JNwrdUEtvJaqk6ZJDdTZ7C9wE9qGN8m1z/%2bW8/fMVu6Jz3NCI/NEoiDLR7M1wJRIM%2bFT9/5mXKxrb3St0jv8D1LjWkC57o7/BlJADyGz8xkAAsuHIvVjQpWUZR3n2t8aQJEzHJegKiE%2bVY15aKQE24tLQumnvD1fv29xRVD5EAz9KMzqCMv6AkWrOZZv9Z/l3iphRbImxtFsGKPOKfbxJaNkaJHN8ZfpaOn6Txj253D1/yfWi4S3YFl/3Q1%2bYp4cYKpCbsFgR%2b%2b9uXUHQkFV2tJzB6tw34ZiMGzrmxwS7hAexQw3r4aKNAHsACdfsQ1VoAZX4aEnLTsHLlyjEhFNkpWNOSiCDNXuPS%2bhgs0kV05aaW2DUcbLQ5mJfzL3%2bjZdZ/lPz4rfF/5hm8U%2bTrBfresl1u03vUyXqg1kOEDQmgwxcB3AOMuBbIasqU4oe//tprqNEeQUzEpwhe4IfTmjjgajDr455yfj7i60MZCUAxfQCL9BHMXxOO1W0q6L48g7feMK3swnaGIfryccjKKUnqI408LwTrIk7z966siLVWqQutzP8BUFdXZVOpqLE9GVNpm/xpuhAmb0/hjxO/rxka/ydI7g//IOkR5%2bytyO05caEwxb4KXwVisENmYBe92NWzKkx%2b5Kc/2PZKT9oPXF%2bBvnNeYF3z2cG6LYxCAEIASoABur3Iv6DHrHdmiuuXLQlB2tVK%2bFRw8hFE/IAxpCGOi1XO30vWms5ZBBC/nxKgFVUBq5xdBeK4cP/x/59/ZYY7ZWMCkP2ECzDU6WsY6XRF3zUFXvilqedXxh3A9YslGL7TAgwVstHz89kgJUzpMx8WXreN%2bVJ5W0qzL9PshvqaDouCFor7fLy8UXyjCX41%2b3gCFB5CZA0fNMZxIXL5e8nacAEeyIdI3xOgU%2baKq/4Y6vI1Dp5zZrh5EHPmmhZN0ZF7kK%2bOwIchPliyZAn7x6VYIj%2bP3WnxxpbqHQjURzH/it3Y1ZWHzVu3iHsmP/wwktNSkFqej3R9Idvdms0CtXt5CIwua1ZwMUQaX1QVaUtjqwf2IQFEDhjqkv2OavzoyHlf9J11ZfhuB1auWvP9EGDP/fItfNGexq5o5qC2wElaVblrMLg6iuJ7J1NeKkGgt98PwoZewLLKjmBZo1xaoNk3%2bkGTHEFl4aH8vUGle2wftAdYm8Y%2bU2l8Q7roR3nARyJLeSCJ7dgWyhTR21FRFMsutaaykb%2blse5ziw1njs6G9qjHroCq6Mshp6K4S0tLa6JYWlsJk%2belsMg0BYtMjGWb92xnO8J3Ql5fYHTP3Ajv7C20tF471ti4xn/8QGd/DObjRlzxp25PZhzsmM%2bki74Svv2LETc/MuDLhQZc8jZKn7kZBju80JA3J/vnl5unUOLrXVwVyV3asFC73xig32dY3qQwfNSqMmxoPzS6uTPTsPVCzohfcRhcEv4Mt8RPVo%2bRV5rIU1l8sCJQNbAxVwI1rvnzjnB4hJoi4wVfsAteprb4C2qPPydcDcTNBq/O9t9Y/URWp3xhMWX/pXUx4M1NSEMsd3MsJcux%2bDQ1PHVRWNQQDc%2bM0H4X5ccu/D00tvVI3yA8z0sdahV4YveDE2BIVAIfO7MYu3B3MXhDRCIY6PjWcJdvM9kcQhghkM7/J7uyYAq/fr12%2b%2bRgfcTvyQveJw9wpzAIIruKsJGwkxBD3pG2sGJfjkfahtf5PfPS1tvNS1on3u2mWmvlmbLe6oF/7uUB2duErQR3wnTCo//qnqpyX5v/7Xvck9eNdXWc/P/l578AjufF27Pdj9IAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="120" data-src="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png" data-srcset="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png 120w" data-sizes="(max-width: 120px) 100vw, 120px" class="text-ui-primary g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png" class="text-ui-primary g-image g-image--loaded" width="120"></noscript></a></div><div class="w-full px-2 sm:px-4 max-w-screen-xs"><!----></div><div class="flex items-center justify-end px-2 sm:px-4"><!----><!----><!----><div class=".clearfix" style="min-width:260px;"><a href="https://github.com/msa-ez/platform?tab=readme-ov-file#running-on-docker-compose-with-github" target="_blank" style="display:block; width:50px; height:50px; line-height:50px; float:left; padding-top: 13px;"><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" style="margin:0 auto;"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><div style="width:60px; height:50px; text-align:center; line-height:50px; font-weight:700; float:left;"><a style="cursor:pointer;">English</a></div><div style="width:50px; height:50px; text-align:center; line-height:50px; float:left; padding-top: 5px;"><button aria-label="Toggle Darkmode" title="Toggle Darkmode"><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div><div style="text-align:center; line-height:50px; float:left;"><a href="http://labs.msaez.io/" target="_blank" rel="noopener" class="px-4 py-2 ml-auto font-bold leading-none text-white rounded-lg shadow-lg bg-ui-primary">
              실습하기
            </a></div></div></div></div><div class="flex items-center justify-between -mx-2 sm:-mx-4 is-mobile"><div class="flex"><a href="/" title="Home" class="flex items-center text-ui-primary active"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 120 64' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-37afcb0017f229c304bfe602273e7d7c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-37afcb0017f229c304bfe602273e7d7c)' width='120' height='64' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAYAAADvVd%2bPAAAACXBIWXMAAC4jAAAuIwF4pT92AAATu0lEQVRo3sVZB3RU15lWIxhscMtunHhd8EkcJzFusb1xwMaAuoQkpFEFUWQwzXEMAQSYElFEkVCbGUmjikZdIJBAqIxmRgUJVRAqmGLABQdwTBDqZebdb/97Z0YIO1nvnrN7mHO%2b89/35pX5vvu3e8fKij69eQ4C48ffg7UZNgK5DrY9ufZ2wtJ5qwfw0cirrDSKahuCrRk0rrKuUFRb05h/Z1VhukZcP378g09vnr2VmZwtR4/Z8nNE9Ed/DAlhRfdM%2bS7X/QXkv/rWtrQ6R2cVW%2bSVNBDkoRoK9EwaCvBMGvQn60fwJcgIPnRuvkfSkBeNPWns4aEadCfrRseudN5lvmrAZU6SZJ%2bobA/Ry3XLyhXV7xPBXxGRh/%2b731PxQ3FsK%2bTi2Fojrx4TQtievP8BQSJHBJ8h%2bzrBje5ZQTaMhEulcTmN2%2bn7G925zgNS/n9K0enF3S5qwC8T8LFAfT9kZojjDMDbgkP34ENwIySnXkNraiN0CfUgAQbph39DaCQyeWT3EuHlhDk0/hXZx36MDxdovOUEnyC8SiQcyS4mbOnNtY8nW0K2lfAFobc/3wGGo05AsTNwwpXgBlbsIs4NHXZEb74zjPnvQJ2ROmKvgmF%2bUr%2bBZpQwZKDZFdaLjt0T%2bgyO8l6jo7zP6KzoNXok9hvpvJG8xUjXE8iqBgXck4alQ8ozxiq5zkAeIFUqa6BPqENNUiPqU1twOu0M6lKaUa06DRJghEhdJ9tMOMzFISwjOBB%2bTZh6T4Tq%2b1w4khU5Y6DAETjuQsRcTJbIGY%2b5YOiIM/oLnECCMAoJqTfP0XA3Z67hTsYfCTMMPbkORvpO6s51Yoa8P7JydTgcVWBeSf2MCDEiT3aI7ACzVwyyoBywtSVg60%2bCfXQcbH46mKNigK7n1wyJe4g8m0fH3nTPYUUj08n1jGafaUyQiKiRrIGsoeSgxngiUiOVx%2bpRlViPWhKHi3I6tZVEahXnuDiEvxHOE%2baYQ8DGIsBfOGma5REiQoTsDdxyknfVfzT2Z8%2bQutUzGHkI4yLczX6fjRx1ZWjczFC3FgN5c0iYuexunhNG8mayM1l/Zm4qIycCQSZpCB6JA5iXNIq4GiNi0ouxdsNWfLx2Azbt2IeUomZsLQOclIMgTwCJABIANPsIVPWgRFGLSnkVd39OBERaCFEep4dGXsM6T1xkFzRXWP2hFlYarZPoOyMXhgtEiZFbqVJRA62yFo3pbXR/tbNZAFshAM2gB3djImck8pwkiDyjmWcjDXvw93oFjLXr0Zv9Pj%2bPkWIvdGiS4ecfiDVr/oRvT8WiP3c2unMd2WDeLFzNCWZ%2bSXfZPNUwF0CQcoofRkLNABb6eYJeeR9%2bYm2FvZFyfFQEOCv76XqTAK5JI1iWeJtIVnHS4wWgcRU0cdVo03ZgzUdr4ObuhqK8YjTlnEVptNbiKXQvt0IwSdwrckjVS9/zAPtX%2b4h0r2WGcx2I0CzcOhUHV68ATHniKWzf8VdIdZvxj5RXITXtwRyne0T2hG0FqpbhH%2br30Jdnj9u57vgg%2bSu4qIxEZgDOij6sJnI790aZ77HGc88/D4c5s/DitKfFueAAH%2bypAubG9QnBvEgAZ/KYtYk3QBVAkK8wk9coq3EiogIXyj/Hnz7%2b09jvePq5X%2bBM5TlUxJgEEteaReMC8NxB9ibhSbMA1pYk%2bBTh9iDlAB7Ld7LeB8p9kZW4995M2U5GV2UyjHnv4FZNFJ5%2b/sWx75xc3IGG7ejOeAc9FAaDebOxPvUcnFQM3skDsCdSYVrAV%2bYtrqe3Iv%2b4Hse%2bBGLKbmK3IhcJFX%2bDd6oB81Q8bIaEAE4kwLaEL1Aj16LcLAAnw12/WtUA/YkqTJg4QQg6wW6CePaRjKOoS21GWaxuPHnuAcYauodE6Rgrg5ZEaK77nZYwuJNJAlQEID0uTDx00kMThd26eQNQvxJtxfsxYfLj45R/EX%2bvjUZ/9kx05zljNG8mDqSVw0FF5SypHw7yPoRSjK9eY5otG1tbTJ/%2bCjaHxyO%2b/BtENwMOCRLcE/oFeUqaYx5wIP7iPQHGzf4l3VX4%2bvmanmdjAzs7O7M3huNsQSdORlWOCVAhNwlwKrmJH580l0BrSx9gY06EpbwSmAVgqAhEauxO8VA7O1thX3jpFaArGcXJ2%2bnYZlwc/wS1R6IgFbngdraj8JJDhw5hLglApVAkQK9UBrXmMn75H0/cF///9thD%2bGjVCiTV9sFNNUKxPyBEsOQAaoJQZRaAk%2bEzW5/WguL847CyNj3DP8Afb775phgHBgbifNlllERqxvKFWQgDrwpklUIARZWtEIB3fOYwUPLSx7P/ncxZgCYIqqi/iodOmGAnwMe1ZflIVR4Q45df/h0ef/wxMY4O/xTQLsJ3mbNFL1Cq3sdLIcWzKam5xvcjOJshobgD/rL5eOZnj90nxKrlS7GbwsRe3i9yABeAyiCylS0iB5TLq8Xsl0RocKn6Khwc7cV9EydOxMWOi/Dy9BLHr73xKs5VdKIsalwIiKpRZeA9Ax1vMMe/ncUDzALYrxWl0CQAQ%2bVCKCO2i4c%2b9dTP4OnhIcZLQ5ZhY2ioGIeGbsK7774rxgEBgZQHNuN2xkyM5L%2bHlqy1cFeNjlUB14RBEgDYcwpQtALyir9jx/54/PQJUyg9%2begkJJR9SbNOiVM1IMjLVP04qjgNrVwv4v9kdCWas9qQmZo1JpyrmytGuw1YtWKVOJ7y6BToi2qgU9bR7OvHl00j7w/oOf7fL4G25hDwko5ZQoALEIy4/dtMbvrTJ3HsWLGItUcfnYpp06aJ88XHCvHh8uVi/NL036O7LhI9WTOpL5iNKzmLIEvqhQfVcj77Kw8DyowiBPnLsDu%2bENHlt1F%2b5hZeefm34v5HH54A5YmLmJfCSIB%2bCodhLErsRin1ABpz7Jce1OJCzWW88ebrYwLYUfKbNu15PPPsM2PnUpSpaFJTOYzRmgQwlUGmja/lx3%2bwlECzBzjYmEPgDXMZxJ3M9xh35%2bjwreKBDz00Cd9c6YCri5M56ViLHHCp/ggU%2b03XTJryBGs7GQdDoT3rz7dnd3Jd2AfJX1MzY2C8tMnrgHffnm66n/D8009i6iOTxn60y5wZiKk2Yq58kHknk8ckG9kq1W1mnn1WElXJ2g6fR1yU3PQMaxtMpOQ8cfLEsWfY2ppy1bpP1qG96AKoQxyrAryF1pjWEc9YSqBoh3vNy1kS4t8pHLoHqKcnASRol7DI3Z9ayOFWSzYKUvaPvWzi1J%2bhpzUJukyRKBlHbPgmSOXB0lfy6axAsYknM9ENcg9YXgCosk7gtd88B7txsT/RlsjPnQl15efwPcTYvERqiVW8ctyR1sZclKoVep4AWUVsFdprOjHtxWlj9xYVFAt3z07JwY6tOzB58mRTWXZ2wnmNSIRi5ikEJF0CD4mqL%2bj4ke/3AJZ22I7GF0YKnXFH/a4E/VIWtuUT88sm4sLJfRhqjMCiZWvw%2b7dnQBF7EJJ%2bNb6sjMD7rv7s3VmzkZGWIn2e4YfCXZ6QJXZL85JHqAz2Md4LuJAIHx6h2NcPIiK7CfsT8nFAVYD4oy2IqzVAdshIOWOAucXdwtwdTdI721vx6f561MRXSWWiqalmLaVtKMopRtS%2baCTGJ6L95GfQxp0S/f71MzcoDF8Sv3fq41PRUNLMKuNqxMxTCzzK1wZE%2bizn2nTo3L29Ab7eH/OCXIdyvrojDzCgcjGRjMKvf/caZEEhuF4bj%2bH8WaIbNDbuAXTL0JM5A/0ngjHaEoEbpaHSxewQtOz%2bzTerFU2pjqnU28cbpbnxYPbxIHIGeCTcxaK0r7D%2byDdYkAsEZQGeKcCcGAluSgN5DHWCu65Is7e04q3QlvbMyLq6hsRGEBGpMo5qeUw1TiU3oyW7HWfyO6gk6kWio4UQTqkboSmqRPS%2bGGzaFMpOVzSxshgdjkeVGYoiS8V1ZHdxnof3FtmMXwqLRsg8TuCVQCyG8p1Yb00Yhhv2AY3bMXDMB3ezqd9Xz8DdjD9wkajrcyQRZqEn/Q%2bs/q/TUfHpa7i2Y/J7ATmG5esKv8POww2G5JJjrESbgDP12/F162o20uWDr5rWMO%2b0a8yn8DjzP6JBwJEa5lvQAN%2b8s8w9vgLOUSfhrM5aWnjo%2bMky9SkUJdJqL0HLSuN1KJPrGFUDgXEZHnwlSJ0ea8lpZ53FF3E0%2bgSTr08YTd2WAcWGxMHotfLFltnftTL8BxsetuY8sMHSC4hFURatANXvsDu8xc2ZLdYJRJrgxFeGUm%2bBg9RX7MJ6S93ZdfKcm1r324aLvvqecwu6Bzr8YOhwZaxjDkPnbOAzdxjPe8Jw3oN1t4Vg5dFTWFC9E0uqd7HF1buwuHo3FmjD2ELdHgTrw43Bur1scdVBLNVFsg%2b0B7FCE81Wl8fiz6UKdlRVYdDKawyU3fmqT7q3OtQxnvmPR5Qb4zcmSenbMxEfmtSYuDnlRc6vOaPdOnz1/vs3Q3pMe34WD5hvpFJI5EfFyjDPicPA1/9mUfi6H/0FDhjimyM6dwx/JmPD52Ug4ky67A9c8QEuuAGfyxi%2bDgFuUvt8YyOGaeYHO2VsiOxohz/bUZrd76eNYot1kQjWRrIg3QGsaVVhdUsiW96oQMjpWCyoiWB%2bleEkyAG2UH8AgVX72BJ9JDTqOjSmnEVtciP0CfWoVIryxpOdQRd/auRY5EmoNqciYVNypGWSlRtVdiSGZXzfbpDYD7SUwkGqAhyjtC7grTHfFLFskBiPibUCx0BPtv3XfSddLnHyQ50%2bBBkG2z0Zu7bG2H01RTpTk4Dighi2J2wD2xW2DX1XDmCkcx4b6PQDzntJmQ1/OS/TRklLiViQbj%2bLbi6APCuZRWUmQHE4nSmLM5i6rpjtbctDYCV5gz6SPCUSIdqDdwuTyg9o42oyyANqiTjP7AN8rc/zQ2P6WaRtU9%2bKWadws5An4rYW4hYRvh8C1mb7C8JNwrdUEtvJaqk6ZJDdTZ7C9wE9qGN8m1z/%2bW8/fMVu6Jz3NCI/NEoiDLR7M1wJRIM%2bFT9/5mXKxrb3St0jv8D1LjWkC57o7/BlJADyGz8xkAAsuHIvVjQpWUZR3n2t8aQJEzHJegKiE%2bVY15aKQE24tLQumnvD1fv29xRVD5EAz9KMzqCMv6AkWrOZZv9Z/l3iphRbImxtFsGKPOKfbxJaNkaJHN8ZfpaOn6Txj253D1/yfWi4S3YFl/3Q1%2bYp4cYKpCbsFgR%2b%2b9uXUHQkFV2tJzB6tw34ZiMGzrmxwS7hAexQw3r4aKNAHsACdfsQ1VoAZX4aEnLTsHLlyjEhFNkpWNOSiCDNXuPS%2bhgs0kV05aaW2DUcbLQ5mJfzL3%2bjZdZ/lPz4rfF/5hm8U%2bTrBfresl1u03vUyXqg1kOEDQmgwxcB3AOMuBbIasqU4oe//tprqNEeQUzEpwhe4IfTmjjgajDr455yfj7i60MZCUAxfQCL9BHMXxOO1W0q6L48g7feMK3swnaGIfryccjKKUnqI408LwTrIk7z966siLVWqQutzP8BUFdXZVOpqLE9GVNpm/xpuhAmb0/hjxO/rxka/ydI7g//IOkR5%2bytyO05caEwxb4KXwVisENmYBe92NWzKkx%2b5Kc/2PZKT9oPXF%2bBvnNeYF3z2cG6LYxCAEIASoABur3Iv6DHrHdmiuuXLQlB2tVK%2bFRw8hFE/IAxpCGOi1XO30vWms5ZBBC/nxKgFVUBq5xdBeK4cP/x/59/ZYY7ZWMCkP2ECzDU6WsY6XRF3zUFXvilqedXxh3A9YslGL7TAgwVstHz89kgJUzpMx8WXreN%2bVJ5W0qzL9PshvqaDouCFor7fLy8UXyjCX41%2b3gCFB5CZA0fNMZxIXL5e8nacAEeyIdI3xOgU%2baKq/4Y6vI1Dp5zZrh5EHPmmhZN0ZF7kK%2bOwIchPliyZAn7x6VYIj%2bP3WnxxpbqHQjURzH/it3Y1ZWHzVu3iHsmP/wwktNSkFqej3R9Idvdms0CtXt5CIwua1ZwMUQaX1QVaUtjqwf2IQFEDhjqkv2OavzoyHlf9J11ZfhuB1auWvP9EGDP/fItfNGexq5o5qC2wElaVblrMLg6iuJ7J1NeKkGgt98PwoZewLLKjmBZo1xaoNk3%2bkGTHEFl4aH8vUGle2wftAdYm8Y%2bU2l8Q7roR3nARyJLeSCJ7dgWyhTR21FRFMsutaaykb%2blse5ziw1njs6G9qjHroCq6Mshp6K4S0tLa6JYWlsJk%2belsMg0BYtMjGWb92xnO8J3Ql5fYHTP3Ajv7C20tF471ti4xn/8QGd/DObjRlzxp25PZhzsmM%2bki74Svv2LETc/MuDLhQZc8jZKn7kZBju80JA3J/vnl5unUOLrXVwVyV3asFC73xig32dY3qQwfNSqMmxoPzS6uTPTsPVCzohfcRhcEv4Mt8RPVo%2bRV5rIU1l8sCJQNbAxVwI1rvnzjnB4hJoi4wVfsAteprb4C2qPPydcDcTNBq/O9t9Y/URWp3xhMWX/pXUx4M1NSEMsd3MsJcux%2bDQ1PHVRWNQQDc%2bM0H4X5ccu/D00tvVI3yA8z0sdahV4YveDE2BIVAIfO7MYu3B3MXhDRCIY6PjWcJdvM9kcQhghkM7/J7uyYAq/fr12%2b%2bRgfcTvyQveJw9wpzAIIruKsJGwkxBD3pG2sGJfjkfahtf5PfPS1tvNS1on3u2mWmvlmbLe6oF/7uUB2duErQR3wnTCo//qnqpyX5v/7Xvck9eNdXWc/P/l578AjufF27Pdj9IAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="120" data-src="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png" data-srcset="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png 120w" data-sizes="(max-width: 120px) 100vw, 120px" class="text-ui-primary g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/logo.1539b60.bd727e13501e82a0ba322b4ad29fd33a.png" class="text-ui-primary g-image g-image--loaded" width="120"></noscript></a><div class="w-full px-2 sm:px-4 max-w-screen-xs"><!----></div></div><div class="flex items-center justify-end px-2 sm:px-4"><!----><!----><!----><div class=".clearfix"><a href="https://github.com/msa-ez/platform?tab=readme-ov-file#running-on-docker-compose-with-github" target="_blank" style="display:block; width:50px; height:50px; line-height:50px; float:left; padding-top: 13px;"><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" style="margin:0 auto;"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><div style="width:60px; height:50px; text-align:center; line-height:50px; font-weight:700; float:left;"><a style="cursor:pointer;">English</a></div><div style="width:50px; height:50px; text-align:center; line-height:50px; float:left; padding-top: 5px;"><button aria-label="Toggle Darkmode" title="Toggle Darkmode"><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div><div style="text-align:center; line-height:50px; float:left;"><a href="http://labs.msaez.io/" target="_blank" rel="noopener" class="px-4 py-2 ml-auto font-bold leading-none text-white rounded-lg shadow-lg bg-ui-primary">
              Try MSAEZ
            </a></div></div></div></div></div></div></header><main class="container relative flex flex-wrap justify-start flex-1 w-full bg-ui-background"><!----><div class="w-full pb-24"><div class="flex flex-wrap items-start justify-start"><div class="order-2 w-full md:w-1/6 sm:pl-4 md:pl-6 lg:pl-8 sticky" style="top:4rem;"><div class="mt-8 sm:pl-4 md:pl-6 md:pt-12 lg:pl-8 sm:pb-16 sm:border-l border-ui-border md:mt-0"><h3 class="pt-0 mt-0 text-sm tracking-wide uppercase border-none">On this page</h3><div><ul><li class="font-semibold depth-2"><a href="/development/oauth2with-keycloak/#jwt-based-authentication-with-keycloak" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          JWT-based Authentication with Keycloak
        </a></li><li class="border-t border-dashed border-ui-border pt-2 mt-2 font-semibold depth-2"><a href="/development/oauth2with-keycloak/#event-storming-model-preparation" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Event Storming Model Preparation
        </a></li><li class="depth-3"><a href="/development/oauth2with-keycloak/#keycloak-topping-configuration-and-code-push" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Keycloak Topping Configuration and Code Push
        </a></li><li class="depth-3"><a href="/development/oauth2with-keycloak/#run-keycloak-server" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Run Keycloak Server
        </a></li><li class="depth-4"><a href="/development/oauth2with-keycloak/#open-and-connect-to-keycloak-server" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-3"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Open and Connect to Keycloak Server
        </a></li><li class="border-t border-dashed border-ui-border pt-2 mt-2 font-semibold depth-2"><a href="/development/oauth2with-keycloak/#oauth-client-configuration" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          OAuth Client Configuration
        </a></li><li class="depth-3"><a href="/development/oauth2with-keycloak/#keycloak-configuration" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Keycloak Configuration
        </a></li><li class="depth-3"><a href="/development/oauth2with-keycloak/#oauth-client-configuration-1" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          OAuth Client Configuration
        </a></li><li class="depth-3"><a href="/development/oauth2with-keycloak/#gateway-client-configuration" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Gateway Client Configuration
        </a></li><li class="depth-3"><a href="/development/oauth2with-keycloak/#test-user-creation" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Test User Creation
        </a></li><li class="depth-3"><a href="/development/oauth2with-keycloak/#keycloak-sso-test" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Keycloak SSO Test
        </a></li><li class="border-t border-dashed border-ui-border pt-2 mt-2 font-semibold depth-2"><a href="/development/oauth2with-keycloak/#token-based-authentication-test" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Token-based Authentication Test
        </a></li><li class="border-t border-dashed border-ui-border pt-2 mt-2 font-semibold depth-2"><a href="/development/oauth2with-keycloak/#token-based-authorization-test" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Token-based Authorization Test
        </a></li><li class="depth-3"><a href="/development/oauth2with-keycloak/#check-order-resources-authorization" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          Check Order Resources Authorization
        </a></li><li class="depth-3"><a href="/development/oauth2with-keycloak/#user-jwt-token-verification" class="relative flex items-center py-1 text-sm transition transform hover:translate-x-1 pl-2"><span class="absolute w-2 h-2 -ml-3 rounded-full opacity-0 bg-ui-primary transition transform scale-0 origin-center"></span>
          User JWT Token Verification
        </a></li></ul></div></div></div><div class="order-1 w-full md:w-5/6"><div class="content"><h1 id="jwt-token-based-authentication-and-authorization"><a href="#jwt-token-based-authentication-and-authorization" aria-hidden="true"><span class="icon icon-link"></span></a>JWT Token-based Authentication and Authorization</h1>
<p>In this hands-on exercise, we will implement Single Sign-On using microservices and the OAuth2 components: Authorization Server, Client, and Resource Server. The Gateway serves as the single entry point, acting as both the Client and Resource Server. We will utilize Keycloak as the Authorization Server.</p>
<h2 id="jwt-based-authentication-with-keycloak"><a href="#jwt-based-authentication-with-keycloak" aria-hidden="true"><span class="icon icon-link"></span></a>JWT-based Authentication with Keycloak</h2>
<ul>
<li>We will practice OAuth2.0-based Spring Security with interactions between the Resource Owner, Client, Authorization Server, and Resource Server.</li>
<li>JWT-based Access Tokens will be used.</li>
<li>Keycloak (<a href="https://www.keycloak.org/" target="_blank" rel="noopener noreferrer">https://www.keycloak.org/</a>) will serve as the Authentication and Authorization Server.</li>
</ul>
<h2 id="event-storming-model-preparation"><a href="#event-storming-model-preparation" aria-hidden="true"><span class="icon icon-link"></span></a>Event Storming Model Preparation</h2>
<ul>
<li>Load the model from the following link in a new tab
<a href="https://www.msaez.io/#/storming/labshopoauthkeycloak-0821" target="_blank" rel="noopener noreferrer">Model Link</a></li>
<li>If the model doesn't load in the browser, click the avatar icon in the upper right corner, log in with your GitHub account, and reload.</li>
<li>Ensure the necessary Event Storming basic model is displayed in the right palette.</li>
<li>Clone the loaded model by clicking the FORK icon in the top menu.
<img src="https://github.com/acmexii/demo/assets/35618409/08eb03f8-c7e3-42e8-a13c-4d473de56f1a" alt="image"></li>
<li>Confirm that the stickers list appears in the right palette.</li>
</ul>
<h3 id="keycloak-topping-configuration-and-code-push"><a href="#keycloak-topping-configuration-and-code-push" aria-hidden="true"><span class="icon icon-link"></span></a>Keycloak Topping Configuration and Code Push</h3>
<ul>
<li>Click the "CODE" button in the upper right corner and select "TOPPINGS."</li>
<li>Make sure 'Oauth by Keycloak' is checked.</li>
<li>
<p>Click on the 'Push to Git' menu in the top menu. In the dialog box that appears, select 'Create New Repository' and click 'CREATE.'</p>
<blockquote>
<p>Since you logged in with your GitHub account initially, your Git information is automatically displayed.
<img src="https://github.com/acmexii/demo/assets/35618409/557f256e-9949-4546-bcde-d3d405f448df" alt="image"></p>
</blockquote>
</li>
<li>The model-based code will be pushed to your GitHub.
<img src="https://github.com/acmexii/demo/assets/35618409/6581f400-adb8-4963-bf03-511d459c5e32" alt="image"></li>
<li>Click on 'IDE' in the left menu, then click 'Open GitPod' from the Cloud IDE list.</li>
</ul>
<h3 id="run-keycloak-server"><a href="#run-keycloak-server" aria-hidden="true"><span class="icon icon-link"></span></a>Run Keycloak Server</h3>
<ul>
<li>Move to the keycloak folder in the Cloud IDE terminal, create the container, and start the Keycloak server.</li>
</ul>
<pre class="language-sh"><code class="language-sh"><span class="token builtin class-name">cd</span> keycloak
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span></code></pre>
<ul>
<li>The Keycloak server's 9090 port should appear in the list.</li>
</ul>
<h4 id="open-and-connect-to-keycloak-server"><a href="#open-and-connect-to-keycloak-server" aria-hidden="true"><span class="icon icon-link"></span></a>Open and Connect to Keycloak Server</h4>
<ul>
<li>Click the port list at the bottom right to open the 9090 port used by Keycloak (second lock icon).
<img src="https://user-images.githubusercontent.com/35618409/215235038-8e362605-75b5-4271-923d-d2c0cd3fffbf.png" alt="image"></li>
<li>Click the first icon to copy the full URL of Keycloak to the clipboard.</li>
<li>Open a web browser, paste the URL, and log in with the configured administrator information (admin / admin).
<img src="https://user-images.githubusercontent.com/35618409/190956899-9c7efca3-04ac-4f11-851c-1e199debaa02.png" alt="image"></li>
<li>The Keycloak main screen should appear as shown below.
<img src="https://user-images.githubusercontent.com/35618409/190957013-3a6669d9-0928-498b-9529-cbac6fad8cd5.png" alt="image"></li>
</ul>
<h2 id="oauth-client-configuration"><a href="#oauth-client-configuration" aria-hidden="true"><span class="icon icon-link"></span></a>OAuth Client Configuration</h2>
<h3 id="keycloak-configuration"><a href="#keycloak-configuration" aria-hidden="true"><span class="icon icon-link"></span></a>Keycloak Configuration</h3>
<ul>
<li>In the Master Realm, click on the 'Tokens' tab and set the Access Token Lifespan to 1 hour.</li>
<li>After modification, click 'Save' at the bottom.</li>
</ul>
<h3 id="oauth-client-configuration-1"><a href="#oauth-client-configuration-1" aria-hidden="true"><span class="icon icon-link"></span></a>OAuth Client Configuration</h3>
<ul>
<li>In the Keycloak server's left menu, click on Clients and add a new client named '12stmall.'
<img src="https://user-images.githubusercontent.com/35618409/190959198-145da6e6-f82d-412c-843c-9f5caf47c09e.png" alt="image">
</li>
<li>Set the Access Type of the registered client to 'confidential.'
<img src="https://user-images.githubusercontent.com/35618409/190959505-5adf84bf-cda5-4cd9-ba90-e8c7d806a8dc.png" alt="image">
</li>
<li>In the Valid Redirect URIs settings below, enter the following:</li>
<li>Rule: Gateway Endpoint URL + /login/oauth2/code/ + ClientId(12stmall)</li>
<li>Click the copy icon of the first URL of the 9090 port at the bottom right (replace 9090 with the Gateway port, 8088, in GitPod).
<img src="https://user-images.githubusercontent.com/35618409/191009706-1033fa72-194b-4806-b9e7-33cffcffcf42.png" alt="image"></li>
<li>Add the Valid Redirect URIs information to the Gateway later.</li>
<li>After saving, check the Credentials tab. The Secret (password) will be used in the Gateway.
<img src="https://user-images.githubusercontent.com/35618409/190960454-9348d122-30d3-49b0-b63d-6389107a305e.png" alt="image">
</li>
</ul>
<h3 id="gateway-client-configuration"><a href="#gateway-client-configuration" aria-hidden="true"><span class="icon icon-link"></span></a>Gateway Client Configuration</h3>
<ul>
<li>Set the required template environment information for Keycloak Client configuration.</li>
<li>In the Gateway's applicaion.yml, set the KeyCloak SSO server's endpoint.</li>
</ul>
<pre class="language-text"><code class="language-text">keycloak-client:
  server-url: https://9090-acmexii-labshopoauthkey-sgn5ady40al.ws-us94.gitpod.io
  realm: master</code></pre>
<blockquote>
<p>Be careful not to have a trailing slash in the server-url value.</p>
</blockquote>
<ul>
<li>Complete the Spring OAuth2 Security configuration.</li>
</ul>
<pre class="language-text"><code class="language-text">  security:
    oauth2:
      client:
        provider:
          keycloak:
            issuer-uri: ${keycloak-client.server-url}/realms/${keycloak-client.realm}
            user-name-attribute: preferred_username
        registration:
          keycloak:
            client-id: &quot;&lt;client-id&gt;&quot;
            client-secret: 
            redirect-uri: &quot;gateway-path/login/oauth2/code/client-name&quot;
            authorization-grant-type: authorization_code
            scope: openid
      resourceserver:
        jwt:
          jwk-set-uri: ${keycloak-client.server-url}/realms/${keycloak-client.realm}/protocol/openid-connect/certs</code></pre>
<blockquote>
<p>Enter '12stmall' as the OAuth Client value on line 51.
Input the client-secret generated in KeyCloak on line 52.
Provide the redirect-uri configured in KeyCloak on line 53.</p>
</blockquote>
<h3 id="test-user-creation"><a href="#test-user-creation" aria-hidden="true"><span class="icon icon-link"></span></a>Test User Creation</h3>
<ul>
<li>In the Keycloak server, go to 'Manage' > 'Users' and create a new user (e.g., user@naver.com).
<img src="https://user-images.githubusercontent.com/35618409/190961205-3c69d45e-2705-4ba2-af18-edbff2f57bf4.png" alt="image"></li>
<li>Set a password for the user and disable the temporary status.
<img src="https://user-images.githubusercontent.com/35618409/190961449-1acc3c93-f448-42be-8b6e-dd6f4c99ac20.png" alt="image"></li>
<li>Create another user, e.g., admin@naver.com, using the same process.</li>
</ul>
<h3 id="keycloak-sso-test"><a href="#keycloak-sso-test" aria-hidden="true"><span class="icon icon-link"></span></a>Keycloak SSO Test</h3>
<ul>
<li>Restart the Gateway and microservices.</li>
</ul>
<pre class="language-text"><code class="language-text">cd gateway
mvn clean spring-boot:run</code></pre>
<ul>
<li>Open the Gateway service for external access (click on the 'Ports' and select the first URL).
<img src="https://user-images.githubusercontent.com/35618409/190962087-a82b9e08-0cde-4d28-8e10-05cd89c938ea.png" alt="image"></li>
<li>Start the microservices (e.g., order service).</li>
</ul>
<pre class="language-text"><code class="language-text">cd order
mvn clean spring-boot:run</code></pre>
<ul>
<li>If an error occurs, start Kafka in a new terminal.</li>
</ul>
<pre class="language-text"><code class="language-text">Broker may not be available.
2022-09-19 06:43:53.548  WARN [monolith,,,] 5204 --- [| adminclient-2] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-2] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.</code></pre>
<pre class="language-text"><code class="language-text">cd kafka
docker-compose up -d</code></pre>
<h2 id="token-based-authentication-test"><a href="#token-based-authentication-test" aria-hidden="true"><span class="icon icon-link"></span></a>Token-based Authentication Test</h2>
<ul>
<li>Access the Order resource through the Gateway URL.</li>
</ul>
<pre class="language-text"><code class="language-text">https://8088-acmexii-labshopmonolith-orw1glcgvae.ws-us65.gitpod.io/orders
(Gateway URL need to be modified)</code></pre>
<ul>
<li>Since it's an unauthorized resource, the Keycloak SSO login window will appear.
<img src="https://user-images.githubusercontent.com/35618409/190966067-a39781e6-87bc-47e6-9688-eea7f7f7cd86.png" alt="image"></li>
<li>Authenticate with the previously created user (user@naver.com / 1).</li>
<li>After successful authentication, the response from the order service will be displayed.</li>
</ul>
<h2 id="token-based-authorization-test"><a href="#token-based-authorization-test" aria-hidden="true"><span class="icon icon-link"></span></a>Token-based Authorization Test</h2>
<ul>
<li>Create roles (CUSTOMER, ADMIN) to restrict access to specific APIs.
<img src="https://user-images.githubusercontent.com/35618409/236124984-ce3f8568-bded-4bf8-b6cd-27baa11f0452.png" alt="image"></li>
<li>Map roles to the created users.</li>
<li>For the user admin@naver.com, assign the ADMIN role.
<img src="https://user-images.githubusercontent.com/35618409/236125504-a42fb63f-8c95-450c-b275-036e815a0630.png" alt="image"></li>
<li>Similarly, assign the CUSTOMER role to the user user@naver.com.</li>
</ul>
<h3 id="check-order-resources-authorization"><a href="#check-order-resources-authorization" aria-hidden="true"><span class="icon icon-link"></span></a>Check Order Resources Authorization</h3>
<ul>
<li>Try accessing the Order resource with the user@naver.com user.</li>
</ul>
<pre class="language-text"><code class="language-text">https://8088-acmexii-labshopmonolith-orw1glcgvae.ws-us65.gitpod.io/orders/placeOrder</code></pre>
<ul>
<li>Then, try accessing the order management resource.</li>
</ul>
<pre class="language-text"><code class="language-text">https://8088-acmexii-labshopmonolith-orw1glcgvae.ws-us65.gitpod.io/orders/manageOrder</code></pre>
<p>Access will be denied for the user@naver.com account with insufficient privileges, resulting in a 403 error.
<img src="https://user-images.githubusercontent.com/35618409/236128025-33798965-23ae-4922-87a0-32435b0a2597.png" alt="image"></p>
<h3 id="user-jwt-token-verification"><a href="#user-jwt-token-verification" aria-hidden="true"><span class="icon icon-link"></span></a>User JWT Token Verification</h3>
<ul>
<li>Access the following URL to check user token information and copy the full token.</li>
</ul>
<pre class="language-text"><code class="language-text">https://8088-acmexii-labshopmonolith-orw1glcgvae.ws-us65.gitpod.io/test/token</code></pre>
<ul>
<li>Open <a href="https://jwt.io/" target="_blank" rel="noopener noreferrer">https://jwt.io/</a>, paste the copied token into the Encoded Token section.
<img src="https://user-images.githubusercontent.com/35618409/236128936-454e2550-8c74-4dd2-b31f-39014ab856da.png" alt="image"></li>
<li>Verify the Role claim in the User Claim section of the decoded token's payload.</li>
</ul>
</div><div class="mt-8 pt-8 lg:mt-12 lg:pt-12 border-t border-ui-border"><div><div class="flex flex-col sm:flex-row justify-between items-center"><!----><!----></div></div></div></div></div></div></main></div><!----><div data-v-8b0e8098><div style="width:100%; padding-bottom:30px; background-color:#1E88E5;" data-v-8b0e8098><div class="flex logo-style" data-v-8b0e8098><div data-v-8b0e8098><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 331 174' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-37afcb0017f229c304bfe602273e7d7c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-37afcb0017f229c304bfe602273e7d7c)' width='331' height='174' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAYAAADvVd%2bPAAAACXBIWXMAAC4jAAAuIwF4pT92AAATu0lEQVRo3sVZB3RU15lWIxhscMtunHhd8EkcJzFusb1xwMaAuoQkpFEFUWQwzXEMAQSYElFEkVCbGUmjikZdIJBAqIxmRgUJVRAqmGLABQdwTBDqZebdb/97Z0YIO1nvnrN7mHO%2b89/35pX5vvu3e8fKij69eQ4C48ffg7UZNgK5DrY9ufZ2wtJ5qwfw0cirrDSKahuCrRk0rrKuUFRb05h/Z1VhukZcP378g09vnr2VmZwtR4/Z8nNE9Ed/DAlhRfdM%2bS7X/QXkv/rWtrQ6R2cVW%2bSVNBDkoRoK9EwaCvBMGvQn60fwJcgIPnRuvkfSkBeNPWns4aEadCfrRseudN5lvmrAZU6SZJ%2bobA/Ry3XLyhXV7xPBXxGRh/%2b731PxQ3FsK%2bTi2Fojrx4TQtievP8BQSJHBJ8h%2bzrBje5ZQTaMhEulcTmN2%2bn7G925zgNS/n9K0enF3S5qwC8T8LFAfT9kZojjDMDbgkP34ENwIySnXkNraiN0CfUgAQbph39DaCQyeWT3EuHlhDk0/hXZx36MDxdovOUEnyC8SiQcyS4mbOnNtY8nW0K2lfAFobc/3wGGo05AsTNwwpXgBlbsIs4NHXZEb74zjPnvQJ2ROmKvgmF%2bUr%2bBZpQwZKDZFdaLjt0T%2bgyO8l6jo7zP6KzoNXok9hvpvJG8xUjXE8iqBgXck4alQ8ozxiq5zkAeIFUqa6BPqENNUiPqU1twOu0M6lKaUa06DRJghEhdJ9tMOMzFISwjOBB%2bTZh6T4Tq%2b1w4khU5Y6DAETjuQsRcTJbIGY%2b5YOiIM/oLnECCMAoJqTfP0XA3Z67hTsYfCTMMPbkORvpO6s51Yoa8P7JydTgcVWBeSf2MCDEiT3aI7ACzVwyyoBywtSVg60%2bCfXQcbH46mKNigK7n1wyJe4g8m0fH3nTPYUUj08n1jGafaUyQiKiRrIGsoeSgxngiUiOVx%2bpRlViPWhKHi3I6tZVEahXnuDiEvxHOE%2baYQ8DGIsBfOGma5REiQoTsDdxyknfVfzT2Z8%2bQutUzGHkI4yLczX6fjRx1ZWjczFC3FgN5c0iYuexunhNG8mayM1l/Zm4qIycCQSZpCB6JA5iXNIq4GiNi0ouxdsNWfLx2Azbt2IeUomZsLQOclIMgTwCJABIANPsIVPWgRFGLSnkVd39OBERaCFEep4dGXsM6T1xkFzRXWP2hFlYarZPoOyMXhgtEiZFbqVJRA62yFo3pbXR/tbNZAFshAM2gB3djImck8pwkiDyjmWcjDXvw93oFjLXr0Zv9Pj%2bPkWIvdGiS4ecfiDVr/oRvT8WiP3c2unMd2WDeLFzNCWZ%2bSXfZPNUwF0CQcoofRkLNABb6eYJeeR9%2bYm2FvZFyfFQEOCv76XqTAK5JI1iWeJtIVnHS4wWgcRU0cdVo03ZgzUdr4ObuhqK8YjTlnEVptNbiKXQvt0IwSdwrckjVS9/zAPtX%2b4h0r2WGcx2I0CzcOhUHV68ATHniKWzf8VdIdZvxj5RXITXtwRyne0T2hG0FqpbhH%2br30Jdnj9u57vgg%2bSu4qIxEZgDOij6sJnI790aZ77HGc88/D4c5s/DitKfFueAAH%2bypAubG9QnBvEgAZ/KYtYk3QBVAkK8wk9coq3EiogIXyj/Hnz7%2b09jvePq5X%2bBM5TlUxJgEEteaReMC8NxB9ibhSbMA1pYk%2bBTh9iDlAB7Ld7LeB8p9kZW4995M2U5GV2UyjHnv4FZNFJ5%2b/sWx75xc3IGG7ejOeAc9FAaDebOxPvUcnFQM3skDsCdSYVrAV%2bYtrqe3Iv%2b4Hse%2bBGLKbmK3IhcJFX%2bDd6oB81Q8bIaEAE4kwLaEL1Aj16LcLAAnw12/WtUA/YkqTJg4QQg6wW6CePaRjKOoS21GWaxuPHnuAcYauodE6Rgrg5ZEaK77nZYwuJNJAlQEID0uTDx00kMThd26eQNQvxJtxfsxYfLj45R/EX%2bvjUZ/9kx05zljNG8mDqSVw0FF5SypHw7yPoRSjK9eY5otG1tbTJ/%2bCjaHxyO%2b/BtENwMOCRLcE/oFeUqaYx5wIP7iPQHGzf4l3VX4%2bvmanmdjAzs7O7M3huNsQSdORlWOCVAhNwlwKrmJH580l0BrSx9gY06EpbwSmAVgqAhEauxO8VA7O1thX3jpFaArGcXJ2%2bnYZlwc/wS1R6IgFbngdraj8JJDhw5hLglApVAkQK9UBrXmMn75H0/cF///9thD%2bGjVCiTV9sFNNUKxPyBEsOQAaoJQZRaAk%2bEzW5/WguL847CyNj3DP8Afb775phgHBgbifNlllERqxvKFWQgDrwpklUIARZWtEIB3fOYwUPLSx7P/ncxZgCYIqqi/iodOmGAnwMe1ZflIVR4Q45df/h0ef/wxMY4O/xTQLsJ3mbNFL1Cq3sdLIcWzKam5xvcjOJshobgD/rL5eOZnj90nxKrlS7GbwsRe3i9yABeAyiCylS0iB5TLq8Xsl0RocKn6Khwc7cV9EydOxMWOi/Dy9BLHr73xKs5VdKIsalwIiKpRZeA9Ax1vMMe/ncUDzALYrxWl0CQAQ%2bVCKCO2i4c%2b9dTP4OnhIcZLQ5ZhY2ioGIeGbsK7774rxgEBgZQHNuN2xkyM5L%2bHlqy1cFeNjlUB14RBEgDYcwpQtALyir9jx/54/PQJUyg9%2begkJJR9SbNOiVM1IMjLVP04qjgNrVwv4v9kdCWas9qQmZo1JpyrmytGuw1YtWKVOJ7y6BToi2qgU9bR7OvHl00j7w/oOf7fL4G25hDwko5ZQoALEIy4/dtMbvrTJ3HsWLGItUcfnYpp06aJ88XHCvHh8uVi/NL036O7LhI9WTOpL5iNKzmLIEvqhQfVcj77Kw8DyowiBPnLsDu%2bENHlt1F%2b5hZeefm34v5HH54A5YmLmJfCSIB%2bCodhLErsRin1ABpz7Jce1OJCzWW88ebrYwLYUfKbNu15PPPsM2PnUpSpaFJTOYzRmgQwlUGmja/lx3%2bwlECzBzjYmEPgDXMZxJ3M9xh35%2bjwreKBDz00Cd9c6YCri5M56ViLHHCp/ggU%2b03XTJryBGs7GQdDoT3rz7dnd3Jd2AfJX1MzY2C8tMnrgHffnm66n/D8009i6iOTxn60y5wZiKk2Yq58kHknk8ckG9kq1W1mnn1WElXJ2g6fR1yU3PQMaxtMpOQ8cfLEsWfY2ppy1bpP1qG96AKoQxyrAryF1pjWEc9YSqBoh3vNy1kS4t8pHLoHqKcnASRol7DI3Z9ayOFWSzYKUvaPvWzi1J%2bhpzUJukyRKBlHbPgmSOXB0lfy6axAsYknM9ENcg9YXgCosk7gtd88B7txsT/RlsjPnQl15efwPcTYvERqiVW8ctyR1sZclKoVep4AWUVsFdprOjHtxWlj9xYVFAt3z07JwY6tOzB58mRTWXZ2wnmNSIRi5ikEJF0CD4mqL%2bj4ke/3AJZ22I7GF0YKnXFH/a4E/VIWtuUT88sm4sLJfRhqjMCiZWvw%2b7dnQBF7EJJ%2bNb6sjMD7rv7s3VmzkZGWIn2e4YfCXZ6QJXZL85JHqAz2Md4LuJAIHx6h2NcPIiK7CfsT8nFAVYD4oy2IqzVAdshIOWOAucXdwtwdTdI721vx6f561MRXSWWiqalmLaVtKMopRtS%2baCTGJ6L95GfQxp0S/f71MzcoDF8Sv3fq41PRUNLMKuNqxMxTCzzK1wZE%2bizn2nTo3L29Ab7eH/OCXIdyvrojDzCgcjGRjMKvf/caZEEhuF4bj%2bH8WaIbNDbuAXTL0JM5A/0ngjHaEoEbpaHSxewQtOz%2bzTerFU2pjqnU28cbpbnxYPbxIHIGeCTcxaK0r7D%2byDdYkAsEZQGeKcCcGAluSgN5DHWCu65Is7e04q3QlvbMyLq6hsRGEBGpMo5qeUw1TiU3oyW7HWfyO6gk6kWio4UQTqkboSmqRPS%2bGGzaFMpOVzSxshgdjkeVGYoiS8V1ZHdxnof3FtmMXwqLRsg8TuCVQCyG8p1Yb00Yhhv2AY3bMXDMB3ezqd9Xz8DdjD9wkajrcyQRZqEn/Q%2bs/q/TUfHpa7i2Y/J7ATmG5esKv8POww2G5JJjrESbgDP12/F162o20uWDr5rWMO%2b0a8yn8DjzP6JBwJEa5lvQAN%2b8s8w9vgLOUSfhrM5aWnjo%2bMky9SkUJdJqL0HLSuN1KJPrGFUDgXEZHnwlSJ0ea8lpZ53FF3E0%2bgSTr08YTd2WAcWGxMHotfLFltnftTL8BxsetuY8sMHSC4hFURatANXvsDu8xc2ZLdYJRJrgxFeGUm%2bBg9RX7MJ6S93ZdfKcm1r324aLvvqecwu6Bzr8YOhwZaxjDkPnbOAzdxjPe8Jw3oN1t4Vg5dFTWFC9E0uqd7HF1buwuHo3FmjD2ELdHgTrw43Bur1scdVBLNVFsg%2b0B7FCE81Wl8fiz6UKdlRVYdDKawyU3fmqT7q3OtQxnvmPR5Qb4zcmSenbMxEfmtSYuDnlRc6vOaPdOnz1/vs3Q3pMe34WD5hvpFJI5EfFyjDPicPA1/9mUfi6H/0FDhjimyM6dwx/JmPD52Ug4ky67A9c8QEuuAGfyxi%2bDgFuUvt8YyOGaeYHO2VsiOxohz/bUZrd76eNYot1kQjWRrIg3QGsaVVhdUsiW96oQMjpWCyoiWB%2bleEkyAG2UH8AgVX72BJ9JDTqOjSmnEVtciP0CfWoVIryxpOdQRd/auRY5EmoNqciYVNypGWSlRtVdiSGZXzfbpDYD7SUwkGqAhyjtC7grTHfFLFskBiPibUCx0BPtv3XfSddLnHyQ50%2bBBkG2z0Zu7bG2H01RTpTk4Dighi2J2wD2xW2DX1XDmCkcx4b6PQDzntJmQ1/OS/TRklLiViQbj%2bLbi6APCuZRWUmQHE4nSmLM5i6rpjtbctDYCV5gz6SPCUSIdqDdwuTyg9o42oyyANqiTjP7AN8rc/zQ2P6WaRtU9%2bKWadws5An4rYW4hYRvh8C1mb7C8JNwrdUEtvJaqk6ZJDdTZ7C9wE9qGN8m1z/%2bW8/fMVu6Jz3NCI/NEoiDLR7M1wJRIM%2bFT9/5mXKxrb3St0jv8D1LjWkC57o7/BlJADyGz8xkAAsuHIvVjQpWUZR3n2t8aQJEzHJegKiE%2bVY15aKQE24tLQumnvD1fv29xRVD5EAz9KMzqCMv6AkWrOZZv9Z/l3iphRbImxtFsGKPOKfbxJaNkaJHN8ZfpaOn6Txj253D1/yfWi4S3YFl/3Q1%2bYp4cYKpCbsFgR%2b%2b9uXUHQkFV2tJzB6tw34ZiMGzrmxwS7hAexQw3r4aKNAHsACdfsQ1VoAZX4aEnLTsHLlyjEhFNkpWNOSiCDNXuPS%2bhgs0kV05aaW2DUcbLQ5mJfzL3%2bjZdZ/lPz4rfF/5hm8U%2bTrBfresl1u03vUyXqg1kOEDQmgwxcB3AOMuBbIasqU4oe//tprqNEeQUzEpwhe4IfTmjjgajDr455yfj7i60MZCUAxfQCL9BHMXxOO1W0q6L48g7feMK3swnaGIfryccjKKUnqI408LwTrIk7z966siLVWqQutzP8BUFdXZVOpqLE9GVNpm/xpuhAmb0/hjxO/rxka/ydI7g//IOkR5%2bytyO05caEwxb4KXwVisENmYBe92NWzKkx%2b5Kc/2PZKT9oPXF%2bBvnNeYF3z2cG6LYxCAEIASoABur3Iv6DHrHdmiuuXLQlB2tVK%2bFRw8hFE/IAxpCGOi1XO30vWms5ZBBC/nxKgFVUBq5xdBeK4cP/x/59/ZYY7ZWMCkP2ECzDU6WsY6XRF3zUFXvilqedXxh3A9YslGL7TAgwVstHz89kgJUzpMx8WXreN%2bVJ5W0qzL9PshvqaDouCFor7fLy8UXyjCX41%2b3gCFB5CZA0fNMZxIXL5e8nacAEeyIdI3xOgU%2baKq/4Y6vI1Dp5zZrh5EHPmmhZN0ZF7kK%2bOwIchPliyZAn7x6VYIj%2bP3WnxxpbqHQjURzH/it3Y1ZWHzVu3iHsmP/wwktNSkFqej3R9Idvdms0CtXt5CIwua1ZwMUQaX1QVaUtjqwf2IQFEDhjqkv2OavzoyHlf9J11ZfhuB1auWvP9EGDP/fItfNGexq5o5qC2wElaVblrMLg6iuJ7J1NeKkGgt98PwoZewLLKjmBZo1xaoNk3%2bkGTHEFl4aH8vUGle2wftAdYm8Y%2bU2l8Q7roR3nARyJLeSCJ7dgWyhTR21FRFMsutaaykb%2blse5ziw1njs6G9qjHroCq6Mshp6K4S0tLa6JYWlsJk%2belsMg0BYtMjGWb92xnO8J3Ql5fYHTP3Ajv7C20tF471ti4xn/8QGd/DObjRlzxp25PZhzsmM%2bki74Svv2LETc/MuDLhQZc8jZKn7kZBju80JA3J/vnl5unUOLrXVwVyV3asFC73xig32dY3qQwfNSqMmxoPzS6uTPTsPVCzohfcRhcEv4Mt8RPVo%2bRV5rIU1l8sCJQNbAxVwI1rvnzjnB4hJoi4wVfsAteprb4C2qPPydcDcTNBq/O9t9Y/URWp3xhMWX/pXUx4M1NSEMsd3MsJcux%2bDQ1PHVRWNQQDc%2bM0H4X5ccu/D00tvVI3yA8z0sdahV4YveDE2BIVAIfO7MYu3B3MXhDRCIY6PjWcJdvM9kcQhghkM7/J7uyYAq/fr12%2b%2bRgfcTvyQveJw9wpzAIIruKsJGwkxBD3pG2sGJfjkfahtf5PfPS1tvNS1on3u2mWmvlmbLe6oF/7uUB2duErQR3wnTCo//qnqpyX5v/7Xvck9eNdXWc/P/l578AjufF27Pdj9IAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="331" data-src="/assets/static/logo.34ff00f.bd727e13501e82a0ba322b4ad29fd33a.png" data-srcset="/assets/static/logo.34ff00f.bd727e13501e82a0ba322b4ad29fd33a.png 331w" data-sizes="(max-width: 331px) 100vw, 331px" class="g-image g-image--lazy g-image--loading" data-v-8b0e8098 data-v-8b0e8098><noscript data-v-8b0e8098 data-v-8b0e8098><img src="/assets/static/logo.34ff00f.bd727e13501e82a0ba322b4ad29fd33a.png" class="g-image g-image--loaded" width="331"></noscript></div></div><div style="width:100%; text-align:center; font-size:14px; color:white; font-weight:300; line-height:1.5; padding-top:20px;" data-v-8b0e8098><div data-v-8b0e8098><div data-v-8b0e8098><div class="footer-top-div" data-v-8b0e8098>© MSA-Ez Authors 2023.  </div><div class="footer-top-div" data-v-8b0e8098>© 2023 uEngine All rights reserved.</div></div><div data-v-8b0e8098>
                    uEngine has registered trademarks and uses trademarks. and MSA-Ez is licensed under the GNU General Public License version 3.0.
                </div></div><div class="footer-bot" data-v-8b0e8098><div data-v-8b0e8098><a href="https://www.gnu.org/licenses/gpl-3.0.en.html#license-text" target="_blank" style="color:#fff;" data-v-8b0e8098>
                        See LICENSE
                    </a>
                      |   
                </div><div data-v-8b0e8098><a href="https://github.com/msa-ez/platform" target="_blank" style="color:#fff;" data-v-8b0e8098>
                        Github Site
                    </a>
                      |   
                </div><div data-v-8b0e8098>E-Mail: help@uengine.org</div></div></div></div></div></div>
    <script>window.__INITIAL_STATE__={"data":{"markdownPage":{"id":"4cf4209d2325d07d12f0b8752dd5411b","title":"JWT Token-based Authentication and Authorization","description":"","path":"\u002Fdevelopment\u002Foauth2with-keycloak\u002F","timeToRead":5,"content":"\u003Ch1 id=\"jwt-token-based-authentication-and-authorization\"\u003E\u003Ca href=\"#jwt-token-based-authentication-and-authorization\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EJWT Token-based Authentication and Authorization\u003C\u002Fh1\u003E\n\u003Cp\u003EIn this hands-on exercise, we will implement Single Sign-On using microservices and the OAuth2 components: Authorization Server, Client, and Resource Server. The Gateway serves as the single entry point, acting as both the Client and Resource Server. We will utilize Keycloak as the Authorization Server.\u003C\u002Fp\u003E\n\u003Ch2 id=\"jwt-based-authentication-with-keycloak\"\u003E\u003Ca href=\"#jwt-based-authentication-with-keycloak\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EJWT-based Authentication with Keycloak\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003EWe will practice OAuth2.0-based Spring Security with interactions between the Resource Owner, Client, Authorization Server, and Resource Server.\u003C\u002Fli\u003E\n\u003Cli\u003EJWT-based Access Tokens will be used.\u003C\u002Fli\u003E\n\u003Cli\u003EKeycloak (\u003Ca href=\"https:\u002F\u002Fwww.keycloak.org\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Ehttps:\u002F\u002Fwww.keycloak.org\u002F\u003C\u002Fa\u003E) will serve as the Authentication and Authorization Server.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"event-storming-model-preparation\"\u003E\u003Ca href=\"#event-storming-model-preparation\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EEvent Storming Model Preparation\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003ELoad the model from the following link in a new tab\n\u003Ca href=\"https:\u002F\u002Fwww.msaez.io\u002F#\u002Fstorming\u002Flabshopoauthkeycloak-0821\" target=\"_blank\" rel=\"noopener noreferrer\"\u003EModel Link\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EIf the model doesn't load in the browser, click the avatar icon in the upper right corner, log in with your GitHub account, and reload.\u003C\u002Fli\u003E\n\u003Cli\u003EEnsure the necessary Event Storming basic model is displayed in the right palette.\u003C\u002Fli\u003E\n\u003Cli\u003EClone the loaded model by clicking the FORK icon in the top menu.\n\u003Cimg src=\"https:\u002F\u002Fgithub.com\u002Facmexii\u002Fdemo\u002Fassets\u002F35618409\u002F08eb03f8-c7e3-42e8-a13c-4d473de56f1a\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EConfirm that the stickers list appears in the right palette.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"keycloak-topping-configuration-and-code-push\"\u003E\u003Ca href=\"#keycloak-topping-configuration-and-code-push\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EKeycloak Topping Configuration and Code Push\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003EClick the \"CODE\" button in the upper right corner and select \"TOPPINGS.\"\u003C\u002Fli\u003E\n\u003Cli\u003EMake sure 'Oauth by Keycloak' is checked.\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EClick on the 'Push to Git' menu in the top menu. In the dialog box that appears, select 'Create New Repository' and click 'CREATE.'\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003ESince you logged in with your GitHub account initially, your Git information is automatically displayed.\n\u003Cimg src=\"https:\u002F\u002Fgithub.com\u002Facmexii\u002Fdemo\u002Fassets\u002F35618409\u002F557f256e-9949-4546-bcde-d3d405f448df\" alt=\"image\"\u003E\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003EThe model-based code will be pushed to your GitHub.\n\u003Cimg src=\"https:\u002F\u002Fgithub.com\u002Facmexii\u002Fdemo\u002Fassets\u002F35618409\u002F6581f400-adb8-4963-bf03-511d459c5e32\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EClick on 'IDE' in the left menu, then click 'Open GitPod' from the Cloud IDE list.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"run-keycloak-server\"\u003E\u003Ca href=\"#run-keycloak-server\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ERun Keycloak Server\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003EMove to the keycloak folder in the Cloud IDE terminal, create the container, and start the Keycloak server.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-sh\"\u003E\u003Ccode class=\"language-sh\"\u003E\u003Cspan class=\"token builtin class-name\"\u003Ecd\u003C\u002Fspan\u003E keycloak\n\u003Cspan class=\"token function\"\u003Edocker-compose\u003C\u002Fspan\u003E up \u003Cspan class=\"token parameter variable\"\u003E-d\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003EThe Keycloak server's 9090 port should appear in the list.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch4 id=\"open-and-connect-to-keycloak-server\"\u003E\u003Ca href=\"#open-and-connect-to-keycloak-server\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EOpen and Connect to Keycloak Server\u003C\u002Fh4\u003E\n\u003Cul\u003E\n\u003Cli\u003EClick the port list at the bottom right to open the 9090 port used by Keycloak (second lock icon).\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F215235038-8e362605-75b5-4271-923d-d2c0cd3fffbf.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EClick the first icon to copy the full URL of Keycloak to the clipboard.\u003C\u002Fli\u003E\n\u003Cli\u003EOpen a web browser, paste the URL, and log in with the configured administrator information (admin \u002F admin).\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F190956899-9c7efca3-04ac-4f11-851c-1e199debaa02.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EThe Keycloak main screen should appear as shown below.\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F190957013-3a6669d9-0928-498b-9529-cbac6fad8cd5.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"oauth-client-configuration\"\u003E\u003Ca href=\"#oauth-client-configuration\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EOAuth Client Configuration\u003C\u002Fh2\u003E\n\u003Ch3 id=\"keycloak-configuration\"\u003E\u003Ca href=\"#keycloak-configuration\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EKeycloak Configuration\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003EIn the Master Realm, click on the 'Tokens' tab and set the Access Token Lifespan to 1 hour.\u003C\u002Fli\u003E\n\u003Cli\u003EAfter modification, click 'Save' at the bottom.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"oauth-client-configuration-1\"\u003E\u003Ca href=\"#oauth-client-configuration-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EOAuth Client Configuration\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003EIn the Keycloak server's left menu, click on Clients and add a new client named '12stmall.'\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F190959198-145da6e6-f82d-412c-843c-9f5caf47c09e.png\" alt=\"image\"\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003ESet the Access Type of the registered client to 'confidential.'\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F190959505-5adf84bf-cda5-4cd9-ba90-e8c7d806a8dc.png\" alt=\"image\"\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003EIn the Valid Redirect URIs settings below, enter the following:\u003C\u002Fli\u003E\n\u003Cli\u003ERule: Gateway Endpoint URL + \u002Flogin\u002Foauth2\u002Fcode\u002F + ClientId(12stmall)\u003C\u002Fli\u003E\n\u003Cli\u003EClick the copy icon of the first URL of the 9090 port at the bottom right (replace 9090 with the Gateway port, 8088, in GitPod).\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F191009706-1033fa72-194b-4806-b9e7-33cffcffcf42.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EAdd the Valid Redirect URIs information to the Gateway later.\u003C\u002Fli\u003E\n\u003Cli\u003EAfter saving, check the Credentials tab. The Secret (password) will be used in the Gateway.\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F190960454-9348d122-30d3-49b0-b63d-6389107a305e.png\" alt=\"image\"\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"gateway-client-configuration\"\u003E\u003Ca href=\"#gateway-client-configuration\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EGateway Client Configuration\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003ESet the required template environment information for Keycloak Client configuration.\u003C\u002Fli\u003E\n\u003Cli\u003EIn the Gateway's applicaion.yml, set the KeyCloak SSO server's endpoint.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Ekeycloak-client:\n  server-url: https:\u002F\u002F9090-acmexii-labshopoauthkey-sgn5ady40al.ws-us94.gitpod.io\n  realm: master\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EBe careful not to have a trailing slash in the server-url value.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cul\u003E\n\u003Cli\u003EComplete the Spring OAuth2 Security configuration.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E  security:\n    oauth2:\n      client:\n        provider:\n          keycloak:\n            issuer-uri: ${keycloak-client.server-url}\u002Frealms\u002F${keycloak-client.realm}\n            user-name-attribute: preferred_username\n        registration:\n          keycloak:\n            client-id: &quot;&lt;client-id&gt;&quot;\n            client-secret: \n            redirect-uri: &quot;gateway-path\u002Flogin\u002Foauth2\u002Fcode\u002Fclient-name&quot;\n            authorization-grant-type: authorization_code\n            scope: openid\n      resourceserver:\n        jwt:\n          jwk-set-uri: ${keycloak-client.server-url}\u002Frealms\u002F${keycloak-client.realm}\u002Fprotocol\u002Fopenid-connect\u002Fcerts\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EEnter '12stmall' as the OAuth Client value on line 51.\nInput the client-secret generated in KeyCloak on line 52.\nProvide the redirect-uri configured in KeyCloak on line 53.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch3 id=\"test-user-creation\"\u003E\u003Ca href=\"#test-user-creation\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ETest User Creation\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003EIn the Keycloak server, go to 'Manage' \u003E 'Users' and create a new user (e.g., user@naver.com).\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F190961205-3c69d45e-2705-4ba2-af18-edbff2f57bf4.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003ESet a password for the user and disable the temporary status.\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F190961449-1acc3c93-f448-42be-8b6e-dd6f4c99ac20.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003ECreate another user, e.g., admin@naver.com, using the same process.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"keycloak-sso-test\"\u003E\u003Ca href=\"#keycloak-sso-test\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EKeycloak SSO Test\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003ERestart the Gateway and microservices.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Ecd gateway\nmvn clean spring-boot:run\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003EOpen the Gateway service for external access (click on the 'Ports' and select the first URL).\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F190962087-a82b9e08-0cde-4d28-8e10-05cd89c938ea.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EStart the microservices (e.g., order service).\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Ecd order\nmvn clean spring-boot:run\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003EIf an error occurs, start Kafka in a new terminal.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003EBroker may not be available.\n2022-09-19 06:43:53.548  WARN [monolith,,,] 5204 --- [| adminclient-2] org.apache.kafka.clients.NetworkClient   : [AdminClient clientId=adminclient-2] Connection to node -1 (localhost\u002F127.0.0.1:9092) could not be established. Broker may not be available.\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Ecd kafka\ndocker-compose up -d\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 id=\"token-based-authentication-test\"\u003E\u003Ca href=\"#token-based-authentication-test\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EToken-based Authentication Test\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003EAccess the Order resource through the Gateway URL.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Ehttps:\u002F\u002F8088-acmexii-labshopmonolith-orw1glcgvae.ws-us65.gitpod.io\u002Forders\n(Gateway URL need to be modified)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003ESince it's an unauthorized resource, the Keycloak SSO login window will appear.\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F190966067-a39781e6-87bc-47e6-9688-eea7f7f7cd86.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EAuthenticate with the previously created user (user@naver.com \u002F 1).\u003C\u002Fli\u003E\n\u003Cli\u003EAfter successful authentication, the response from the order service will be displayed.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"token-based-authorization-test\"\u003E\u003Ca href=\"#token-based-authorization-test\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EToken-based Authorization Test\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003ECreate roles (CUSTOMER, ADMIN) to restrict access to specific APIs.\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F236124984-ce3f8568-bded-4bf8-b6cd-27baa11f0452.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EMap roles to the created users.\u003C\u002Fli\u003E\n\u003Cli\u003EFor the user admin@naver.com, assign the ADMIN role.\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F236125504-a42fb63f-8c95-450c-b275-036e815a0630.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003ESimilarly, assign the CUSTOMER role to the user user@naver.com.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"check-order-resources-authorization\"\u003E\u003Ca href=\"#check-order-resources-authorization\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECheck Order Resources Authorization\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003ETry accessing the Order resource with the user@naver.com user.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Ehttps:\u002F\u002F8088-acmexii-labshopmonolith-orw1glcgvae.ws-us65.gitpod.io\u002Forders\u002FplaceOrder\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003EThen, try accessing the order management resource.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Ehttps:\u002F\u002F8088-acmexii-labshopmonolith-orw1glcgvae.ws-us65.gitpod.io\u002Forders\u002FmanageOrder\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAccess will be denied for the user@naver.com account with insufficient privileges, resulting in a 403 error.\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F236128025-33798965-23ae-4922-87a0-32435b0a2597.png\" alt=\"image\"\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"user-jwt-token-verification\"\u003E\u003Ca href=\"#user-jwt-token-verification\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EUser JWT Token Verification\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003EAccess the following URL to check user token information and copy the full token.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003Ehttps:\u002F\u002F8088-acmexii-labshopmonolith-orw1glcgvae.ws-us65.gitpod.io\u002Ftest\u002Ftoken\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003EOpen \u003Ca href=\"https:\u002F\u002Fjwt.io\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Ehttps:\u002F\u002Fjwt.io\u002F\u003C\u002Fa\u003E, paste the copied token into the Encoded Token section.\n\u003Cimg src=\"https:\u002F\u002Fuser-images.githubusercontent.com\u002F35618409\u002F236128936-454e2550-8c74-4dd2-b31f-39014ab856da.png\" alt=\"image\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EVerify the Role claim in the User Claim section of the decoded token's payload.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n","sidebar":"started","next":"","prev":"","headings":[{"depth":1,"value":"JWT Token-based Authentication and Authorization","anchor":"#jwt-token-based-authentication-and-authorization"},{"depth":2,"value":"JWT-based Authentication with Keycloak","anchor":"#jwt-based-authentication-with-keycloak"},{"depth":2,"value":"Event Storming Model Preparation","anchor":"#event-storming-model-preparation"},{"depth":3,"value":"Keycloak Topping Configuration and Code Push","anchor":"#keycloak-topping-configuration-and-code-push"},{"depth":3,"value":"Run Keycloak Server","anchor":"#run-keycloak-server"},{"depth":4,"value":"Open and Connect to Keycloak Server","anchor":"#open-and-connect-to-keycloak-server"},{"depth":2,"value":"OAuth Client Configuration","anchor":"#oauth-client-configuration"},{"depth":3,"value":"Keycloak Configuration","anchor":"#keycloak-configuration"},{"depth":3,"value":"OAuth Client Configuration","anchor":"#oauth-client-configuration-1"},{"depth":3,"value":"Gateway Client Configuration","anchor":"#gateway-client-configuration"},{"depth":3,"value":"Test User Creation","anchor":"#test-user-creation"},{"depth":3,"value":"Keycloak SSO Test","anchor":"#keycloak-sso-test"},{"depth":2,"value":"Token-based Authentication Test","anchor":"#token-based-authentication-test"},{"depth":2,"value":"Token-based Authorization Test","anchor":"#token-based-authorization-test"},{"depth":3,"value":"Check Order Resources Authorization","anchor":"#check-order-resources-authorization"},{"depth":3,"value":"User JWT Token Verification","anchor":"#user-jwt-token-verification"}]},"allMarkdownPage":{"edges":[{"node":{"path":"\u002Ftool\u002Fevent-storming-tool\u002F","title":"EventStorming"}},{"node":{"path":"\u002Ftool\u002Fsi-gpt\u002F","title":"Code Implementation with ChatGPT"}},{"node":{"path":"\u002Ftool\u002Finfrastructure-modeling\u002F","title":"Infrastructure Modeling (Kubernetes)"}},{"node":{"path":"\u002Ftool\u002Fon-prem-inst\u002F","title":"Installing on-premise MSA-Easy"}},{"node":{"path":"\u002Ftool\u002Fdevelopment-practice\u002F","title":"Registration Course"}},{"node":{"path":"\u002Ftool\u002Fmodel-driven\u002F","title":"Automatic Code Generation"}},{"node":{"path":"\u002Ftool\u002Fmarketplace\u002F","title":"Marketplace"}},{"node":{"path":"\u002Ftool\u002Fk8s-modeling\u002F","title":"K8s Deployment Modeling"}},{"node":{"path":"\u002Ftool\u002Fgoogle-drive-examples\u002F","title":"Google Drive Examples"}},{"node":{"path":"\u002Ftemplates-language\u002Fgo-template\u002F","title":"Go Template "}},{"node":{"path":"\u002Ftemplates-language\u002Fpython-template\u002F","title":"Python template "}},{"node":{"path":"\u002Ftool\u002Fcloud-ide-tool\u002F","title":"Cloud IDE"}},{"node":{"path":"\u002Ftool\u002Fchat-gpt\u002F","title":"Creating Models with ChatGPT"}},{"node":{"path":"\u002Ftool\u002Fattending-lectures\u002F","title":"Attending lectures"}},{"node":{"path":"\u002Ftemplates-language\u002Fspringboot-java-template\u002F","title":"Spring Boot\u002FJava Template"}},{"node":{"path":"\u002Fstarted\u002Fkey-features\u002F","title":"Key Features"}},{"node":{"path":"\u002Fstarted\u002F","title":"Introduction"}},{"node":{"path":"\u002Foperation\u002Fops-deploy-diagramming-advanced-ingress\u002F","title":"Ingress Deployment Model Design"}},{"node":{"path":"\u002Foperation\u002Fops-deploy-diagramming-basic-objects\u002F","title":"12st Mall Basic Deploy"}},{"node":{"path":"\u002Fstarted\u002Fevent-storming-learning\u002F","title":"Event Storming Learning"}},{"node":{"path":"\u002Fstarted\u002Fdomain-driven\u002F","title":"Domain-Driven Design Learning"}},{"node":{"path":"\u002Fexample-scenario\u002Ffood-delivery\u002F","title":"food delivery"}},{"node":{"path":"\u002Foperation\u002Fops-deploy-diagramming-advanced-pvc\u002F","title":"Persistent Volume"}},{"node":{"path":"\u002Fexample-scenario\u002Fonline-lecture\u002F","title":"Internet lecture system"}},{"node":{"path":"\u002Foperation\u002Fops-deploy-diagramming-advanced-istio\u002F","title":"Istio Mesh"}},{"node":{"path":"\u002Fexample-scenario\u002Faccommodation-reservation\u002F","title":"AirBnB"}},{"node":{"path":"\u002Foperation\u002Fops-deploy-diagramming-advanced-hpa\u002F","title":"Automatic Scaling (HPA) Deployment"}},{"node":{"path":"\u002Fexample-scenario\u002Flibrary-system\u002F","title":"library system"}},{"node":{"path":"\u002Fexample-scenario\u002Fanimal-hospital\u002F","title":"Veterinary Practice Management System"}},{"node":{"path":"\u002Fdevelopment\u002Foauth2with-keycloak\u002F","title":"JWT Token-based Authentication and Authorization"}},{"node":{"path":"\u002Fdevelopment\u002Fpub-sub\u002F","title":"Pub\u002FSub Integration"}},{"node":{"path":"\u002Fdevelopment\u002Fdp-cqrs\u002F","title":"Data Projection with CQRS"}},{"node":{"path":"\u002Fdevelopment\u002Fmonolith-2-misvc\u002F","title":"Request\u002FResponse Communication in MSA Integration"}},{"node":{"path":"\u002Fcustom-template\u002Ftemplate-editor\u002F","title":""}},{"node":{"path":"\u002Fdevelopment\u002Fchoreography-saga\u002F","title":"Choreography Saga"}},{"node":{"path":"\u002Fcustom-template\u002Ftemplate-structure\u002F","title":"Template File Structure"}},{"node":{"path":"\u002Fdevelopment\u002Fgateway\u002F","title":"API Gateway"}},{"node":{"path":"\u002Fdevelopment\u002Fcna-start\u002F","title":"Running Unit Microservices"}},{"node":{"path":"\u002Fcustom-template\u002Ftemplate-editor-custom-template\u002F","title":"1. Creating a Repository"}},{"node":{"path":"\u002Fcustom-template\u002Funit-test\u002F","title":"Test Automation"}},{"node":{"path":"\u002Fcustom-template\u002Ftutorial\u002F","title":"Concept of Custom Template"}},{"node":{"path":"\u002Fcustom-template\u002Fglobal-helper\u002F","title":""}},{"node":{"path":"\u002Fcustom-template\u002Fmock-server\u002F","title":"Open API 3.0-based Mock Server Generation Topping(New)"}},{"node":{"path":"\u002Fcustom-template\u002Floop-conditional-statement\u002F","title":""}},{"node":{"path":"\u002Fcustom-template\u002Fhelper\u002F","title":""}},{"node":{"path":"\u002Fcustom-template\u002Fdesigning-template\u002F","title":"Developing Custom Template"}},{"node":{"path":"\u002Fcustom-template\u002Fcustom-template\u002F","title":"Custom Template Objects"}},{"node":{"path":"\u002Fbusiness\u002F","title":"Eventstorming - Shopping Mall"}},{"node":{"path":"\u002Fbusiness\u002Feventstorming-fooddelivery\u002F","title":"[이벤트스토밍] - DDD Food Delivery 예제"}},{"node":{"path":"\u002Fbusiness\u002Fddd-google-drive\u002F","title":"[이벤트스토밍] - 구글 드라이브 예제"}},{"node":{"path":"\u002Fcontact\u002Fquestion\u002F","title":"CONTACT"}}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.eec89431.js" defer></script><script src="/assets/js/page--src--templates--markdown-page-vue.e74886a9.js" defer></script>
  </body>
</html>
