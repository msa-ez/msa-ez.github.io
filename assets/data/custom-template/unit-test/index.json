{"hash":"13b927810618512ef9d82bc70675244a5ad579cc","data":{"markdownPage":{"id":"28b3f9810c95d264729fd1b45ad2504e","title":"Test Automation","description":"","path":"/custom-template/unit-test/","timeToRead":3,"content":"<h1 id=\"test-automation\"><a href=\"#test-automation\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Test Automation</h1>\n<h2 id=\"unit-test-creation-toppingnew\"><a href=\"#unit-test-creation-toppingnew\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Unit Test Creation Topping(New)</h2>\n<h3 id=\"scheme\"><a href=\"#scheme\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Scheme</h3>\n<p>A Topping that automatically creates code for unit test has been added.</p>\n<p><img src=\"https://github.com/msa-ez/msa-ez.github.io/assets/113568664/3569acfc-36bd-464e-8944-1bf2a0e589e7\" alt=\"스크린샷 2023-11-06 오후 4 39 33\"></p>\n<h3 id=\"specification\"><a href=\"#specification\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Specification</h3>\n<p>You can apply Unit Test Topping from the Marketplace, and with this application, a 'test' folder is being added within the source of each microservices.</p>\n<p><img src=\"https://github.com/msa-ez/msa-ez.github.io/assets/113568664/ecb2ef37-e8cc-42cc-84f6-01e54179888d\" alt=\"스크린샷 2023-11-06 오후 4 52 24\"></p>\n<p>And the Test file is being created inside the test folder based on the name of the policy headed to the domain event.</p>\n<p><img src=\"https://github.com/msa-ez/msa-ez.github.io/assets/113568664/7cd50ed9-431d-4125-9800-d8f6a06b7e91\" alt=\"스크린샷 2023-11-06 오후 4 53 42\"></p>\n<p>Looking at the code, 'given' shows data such as inventory quantity and product ID for the entity, 'when' shows order information, and when the event is published, results based on the message received from 'then' are displayed.</p>\n<p>From the perspective of designing a business, if an example is defined at the modeling stage, a test must be conducted to determine whether the business logic has been properly designed from the developer's perspective.</p>\n<p>When the logic operates, an event is received through the policy handler and the domain logic operates upon receiving the event. The logic processes the event to update the actual data, and if the result is good, the test is completed normally.</p>\n<p>Using unit tests in this way, events are published internally by the Spring framework and results can be received through the message collector, allowing self-testing locally without an actual Kafka server.</p>\n<h3 id=\"application\"><a href=\"#application\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Application</h3>\n<p><img src=\"https://github.com/msa-ez/msa-ez.github.io/assets/113568664/0877f676-4085-4ffd-9832-ebb06dc56a5c\" alt=\"스크린샷 2023-11-06 오후 4 58 00\"></p>\n<p>When actually operating in Gitpod, the test code is contained in the inventory microservice folder, as seen in the code preview earlier.</p>\n<p><img src=\"https://github.com/msa-ez/msa-ez.github.io/assets/113568664/bd543df7-9616-4eb3-b96e-734acd80c923\" alt=\"스크린샷 2023-11-06 오후 4 59 19\"></p>\n<p>Open a terminal in the folder where you want to perform unit testing and enter the 'mvn test' command to verify the business logic.</p>\n<h2 id=\"open-api-30-based-mock-server-generation-toppingnew\"><a href=\"#open-api-30-based-mock-server-generation-toppingnew\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Open API 3.0-based Mock Server Generation Topping(New)</h2>\n<h3 id=\"scheme-1\"><a href=\"#scheme-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Scheme</h3>\n<p>In order to enable parallel development even if the actual service for the dependency microservice is not installed in the interconnection between microservices, a topping that automatically creates development dependency that can be tested by creating a mock server and makes examples by Open API 3.0 has been added.</p>\n<h3 id=\"specification-1\"><a href=\"#specification-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Specification</h3>\n<p><img src=\"https://github.com/msa-ez/msaschool.github.io/assets/113568664/ffaa62b4-e480-4a18-8e2d-dd228744685c\" alt=\"image\"></p>\n<p>The specific role of \"Local Microservice Development Dependencies\" from the topping tab of Marketplace includes :</p>\n<ol>\n<li>Automatically creates yml type OpenAPI 3.0 from the model.</li>\n<li>Creates mock server by Microcks, the open source.</li>\n<li>Creates api documentation.</li>\n<li>Runs the Kafka server for asynchronous integration.</li>\n</ol>\n<p>The advantages of Open API 3.0 is that with the addition of the example specification, you can create expected values for various inputs, and you can also directly create examples in the eventstorming model based on it.</p>\n<p>Applying this topping creates an infra folder for each microservice, creates an openapi.yaml file within it, and runs docker-compose to automatically create and run dependencies along with the mock server.</p>\n<h3 id=\"application-1\"><a href=\"#application-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Application</h3>\n<p><img src=\"https://github.com/msa-ez/msaschool.github.io/assets/113568664/c8ab2295-4311-4b70-954c-4a63781febd4\" alt=\"스크린샷 2023-10-31 오후 4 36 54\"></p>\n<p>When you apply the \"local-dep\" topping taken from the marketplace to the code, you can see that an infra folder is created within the order microservice and an openapi.yaml file is created in the internal api folder. You can create your own mock server using the specifications written here.</p>\n<p><img src=\"https://github.com/msa-ez/msaschool.github.io/assets/113568664/c7ee0127-a6d9-4591-9247-1e798ee40278\" alt=\"스크린샷 2023-10-31 오후 4 39 28\"></p>\n<p>When an order action is taken for each product through the example specified in the specification, a return value that decreases the inventory quantity is given.</p>\n<p><img src=\"https://github.com/msa-ez/msaschool.github.io/assets/113568664/eb61ae67-423a-44b5-a643-5fdae703c57b\" alt=\"스크린샷 2023-10-31 오후 4 58 09\"></p>\n<p>A UI that allows you to input example data when setting a command api has been added, so you can edit the example result by directly entering it in the UI above.</p>\n<p>Given, When, and Then refer to the data contained in the existing state of the aggregate, the called API, and the domain event published as a result. It is possible to receive the data values entered for testing and create them in the open API specifications.</p>\n","sidebar":"started","next":"","prev":"","headings":[{"depth":1,"value":"Test Automation","anchor":"#test-automation"},{"depth":2,"value":"Unit Test Creation Topping(New)","anchor":"#unit-test-creation-toppingnew"},{"depth":3,"value":"Scheme","anchor":"#scheme"},{"depth":3,"value":"Specification","anchor":"#specification"},{"depth":3,"value":"Application","anchor":"#application"},{"depth":2,"value":"Open API 3.0-based Mock Server Generation Topping(New)","anchor":"#open-api-30-based-mock-server-generation-toppingnew"},{"depth":3,"value":"Scheme","anchor":"#scheme-1"},{"depth":3,"value":"Specification","anchor":"#specification-1"},{"depth":3,"value":"Application","anchor":"#application-1"}]},"allMarkdownPage":{"edges":[{"node":{"path":"/tool/event-storming-tool/","title":"EventStorming"}},{"node":{"path":"/tool/marketplace/","title":"Marketplace"}},{"node":{"path":"/tool/infrastructure-modeling/","title":"Infrastructure Modeling (Kubernetes)"}},{"node":{"path":"/tool/si-gpt/","title":"Code Implementation with ChatGPT"}},{"node":{"path":"/tool/on-prem-inst/","title":"Installing on-premise MSA-Easy"}},{"node":{"path":"/tool/model-driven/","title":"Automatic Code Generation"}},{"node":{"path":"/tool/k8s-modeling/","title":"K8s Deployment Modeling"}},{"node":{"path":"/tool/chat-gpt/","title":"Creating Models with ChatGPT"}},{"node":{"path":"/started/domain-driven/","title":"Domain-Driven Design Learning"}},{"node":{"path":"/tool/google-drive-examples/","title":"Google Drive Examples"}},{"node":{"path":"/tool/development-practice/","title":"Registration Course"}},{"node":{"path":"/templates-language/python-template/","title":"Python template "}},{"node":{"path":"/tool/attending-lectures/","title":"Attending lectures"}},{"node":{"path":"/tool/cloud-ide-tool/","title":"Cloud IDE"}},{"node":{"path":"/templates-language/go-template/","title":"Go Template "}},{"node":{"path":"/started/key-features/","title":"Key Features"}},{"node":{"path":"/started/","title":"Introduction"}},{"node":{"path":"/started/event-storming-learning/","title":"Event Storming Learning"}},{"node":{"path":"/templates-language/springboot-java-template/","title":"Spring Boot/Java Template"}},{"node":{"path":"/example-scenario/online-lecture/","title":"Internet lecture system"}},{"node":{"path":"/example-scenario/library-system/","title":"library system"}},{"node":{"path":"/operation/ops-deploy-diagramming-advanced-hpa/","title":"Automatic Scaling (HPA) Deployment"}},{"node":{"path":"/operation/ops-deploy-diagramming-basic-objects/","title":"12st Mall Basic Deploy"}},{"node":{"path":"/operation/ops-deploy-diagramming-advanced-pvc/","title":"Persistent Volume"}},{"node":{"path":"/operation/ops-deploy-diagramming-advanced-istio/","title":"Istio Mesh"}},{"node":{"path":"/example-scenario/food-delivery/","title":"food delivery"}},{"node":{"path":"/example-scenario/accommodation-reservation/","title":"AirBnB"}},{"node":{"path":"/operation/ops-deploy-diagramming-advanced-ingress/","title":"Ingress Deployment Model Design"}},{"node":{"path":"/example-scenario/animal-hospital/","title":"Veterinary Practice Management System"}},{"node":{"path":"/development/oauth2with-keycloak/","title":"JWT Token-based Authentication and Authorization"}},{"node":{"path":"/development/pub-sub/","title":"Pub/Sub Integration"}},{"node":{"path":"/custom-template/template-editor/","title":""}},{"node":{"path":"/development/gateway/","title":"API Gateway"}},{"node":{"path":"/development/monolith-2-misvc/","title":"Request/Response Communication in MSA Integration"}},{"node":{"path":"/development/dp-cqrs/","title":"Data Projection with CQRS"}},{"node":{"path":"/custom-template/tutorial/","title":"Concept of Custom Template"}},{"node":{"path":"/development/cna-start/","title":"Running Unit Microservices"}},{"node":{"path":"/development/choreography-saga/","title":"Choreography Saga"}},{"node":{"path":"/custom-template/unit-test/","title":"Test Automation"}},{"node":{"path":"/custom-template/template-structure/","title":"Template File Structure"}},{"node":{"path":"/custom-template/template-editor-custom-template/","title":"1. Creating a Repository"}},{"node":{"path":"/custom-template/loop-conditional-statement/","title":""}},{"node":{"path":"/custom-template/helper/","title":""}},{"node":{"path":"/custom-template/global-helper/","title":""}},{"node":{"path":"/custom-template/mock-server/","title":"Open API 3.0-based Mock Server Generation Topping(New)"}},{"node":{"path":"/custom-template/designing-template/","title":"Developing Custom Template"}},{"node":{"path":"/custom-template/custom-template/","title":"Custom Template Objects"}},{"node":{"path":"/contact/question/","title":"CONTACT"}},{"node":{"path":"/business/","title":"Eventstorming - Shopping Mall"}},{"node":{"path":"/business/eventstorming-fooddelivery/","title":"[이벤트스토밍] - DDD Food Delivery 예제"}},{"node":{"path":"/business/ddd-google-drive/","title":"[이벤트스토밍] - 구글 드라이브 예제"}}]}},"context":{}}